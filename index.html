<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Car Contact Voice - Smart Engine Control | AI Voice Assistant</title>
    <!-- Deployment: 2025-05-27 AI Voice System Fully Activated -->
    <meta name="description" content="Control your car with voice commands using AI. Start/stop engine, check status, and get real-time vehicle information through advanced voice recognition.">
    <meta name="keywords" content="car voice control, AI assistant, vehicle automation, smart car, voice commands, car technology">
    <meta name="author" content="jsnugroho">
    <meta property="og:title" content="Car Contact Voice - AI Voice Assistant">
    <meta property="og:description" content="Revolutionary car control through AI voice commands. Start your engine, check status, and monitor your vehicle with simple voice commands.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://car-voice-assistant.netlify.app">
    <link rel="icon" type="image/x-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>🚗</text></svg>">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* Performance optimizations */
        * {
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .feature-card, .setup-card, .metric-card, .cta-button, .demo-button, .connect-button {
            will-change: transform;
            backface-visibility: hidden;
            transform: translateZ(0);
        }

        body {
            font-family: 'Arial', sans-serif;
            line-height: 1.6;
            color: #ffffff;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 50%, #16213e 100%);
            overflow-x: hidden;
            will-change: scroll-position;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header */
        header {
            position: fixed;
            top: 0;
            width: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 1000;
            transition: background 0.3s ease;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }

        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 2rem;
            position: relative;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: bold;
            background: linear-gradient(45deg, #4285f4, #34a853, #fbbc05, #ea4335);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .nav-links {
            display: flex;
            list-style: none;
            gap: 2rem;
        }

        .nav-links a {
            color: #fff;
            text-decoration: none;
            transition: all 0.2s ease;
            padding: 10px 20px;
            border-radius: 25px;
            will-change: transform;
        }

        .nav-links a:hover {
            color: #4285f4;
            background: rgba(66, 133, 244, 0.1);
            transform: translateY(-2px);
        }

        /* Hero Section */
        .hero {
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            position: relative;
            background: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 600"><defs><pattern id="grid" width="40" height="40" patternUnits="userSpaceOnUse"><path d="M 40 0 L 0 0 0 40" fill="none" stroke="%23ffffff" stroke-width="0.5" opacity="0.1"/></pattern></defs><rect width="100%" height="100%" fill="url(%23grid)"/></svg>');
            background-size: cover;
        }

        .hero-content {
            max-width: 800px;
            animation: fadeInUp 0.8s ease;
        }

        .hero h1 {
            font-size: 3.5rem;
            margin-bottom: 1rem;
            background: linear-gradient(45deg, #4285f4, #34a853);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .hero p {
            font-size: 1.3rem;
            margin-bottom: 2rem;
            opacity: 0.9;
        }

        .cta-button {
            display: inline-block;
            padding: 15px 40px;
            background: linear-gradient(45deg, #4285f4, #34a853);
            color: white;
            text-decoration: none;
            border-radius: 50px;
            font-weight: bold;
            transition: transform 0.15s ease;
            box-shadow: 0 6px 20px rgba(66, 133, 244, 0.3);
        }

        .cta-button:hover {
            transform: translateY(-2px);
        }

        .cta-button:active {
            transform: translateY(0);
        }

        /* Voice Animation */
        .voice-animation {
            position: absolute;
            top: 50%;
            right: 10%;
            transform: translateY(-50%);
            width: 200px;
            height: 200px;
        }

        .voice-circle {
            width: 100%;
            height: 100%;
            border: 3px solid #4285f4;
            border-radius: 50%;
            position: relative;
            animation: pulse 2s infinite;
            box-shadow: 0 0 20px rgba(66, 133, 244, 0.5);
        }

        .voice-circle::before,
        .voice-circle::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            border: 2px solid #34a853;
            border-radius: 50%;
            animation: ripple 2s infinite;
        }

        .voice-circle::before {
            width: 120%;
            height: 120%;
            animation-delay: 0.5s;
        }

        .voice-circle::after {
            width: 140%;
            height: 140%;
            animation-delay: 1s;
        }

        /* Features Section */
        .features {
            padding: 100px 0;
            background: rgba(255, 255, 255, 0.05);
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 3rem;
            margin-top: 3rem;
        }

        .feature-card {
            background: rgba(255, 255, 255, 0.1);
            padding: 2rem;
            border-radius: 15px;
            text-align: center;
            transition: transform 0.15s ease;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .feature-card:hover {
            transform: translateY(-5px);
            background: rgba(255, 255, 255, 0.15);
        }

        .feature-icon {
            width: 80px;
            height: 80px;
            margin: 0 auto 1rem;
            background: linear-gradient(45deg, #4285f4, #34a853);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            box-shadow: 0 4px 15px rgba(66, 133, 244, 0.3);
        }

        .section-title {
            text-align: center;
            font-size: 2.5rem;
            margin-bottom: 1rem;
            background: linear-gradient(45deg, #4285f4, #34a853);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        /* How It Works */
        .how-it-works {
            padding: 100px 0;
        }

        .steps {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-top: 3rem;
        }

        .step {
            text-align: center;
            position: relative;
        }

        .step-number {
            width: 60px;
            height: 60px;
            background: linear-gradient(45deg, #4285f4, #34a853);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1rem;
            font-size: 1.5rem;
            font-weight: bold;
        }

        /* Demo Section */
        .demo {
            padding: 100px 0;
            background: rgba(66, 133, 244, 0.1);
            text-align: center;
        }



        /* Car Setup Section */
        .car-setup {
            padding: 100px 0;
            background: rgba(52, 168, 83, 0.1);
        }

        .setup-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-top: 3rem;
        }

        .setup-card {
            background: rgba(255, 255, 255, 0.1);
            padding: 2rem;
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            transition: transform 0.15s ease;
        }

        .setup-card:hover {
            transform: translateY(-3px);
        }

        .setup-form {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .form-group label {
            font-weight: bold;
            color: #4285f4;
        }

        .form-group input, .form-group select {
            padding: 12px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 1rem;
            transition: border-color 0.2s ease;
        }

        .form-group select {
            background: rgba(0, 0, 0, 0.7);
            color: white;
        }

        .form-group select option {
            background: #1a1a2e;
            color: white;
            padding: 10px;
        }

        .form-group input:focus, .form-group select:focus {
            outline: none;
            border-color: #4285f4;
            background: rgba(255, 255, 255, 0.15);
        }

        .form-group input::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }

        .connect-button {
            background: linear-gradient(45deg, #34a853, #4285f4);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.15s ease;
            box-shadow: 0 4px 15px rgba(52, 168, 83, 0.3);
        }

        .connect-button:hover {
            transform: translateY(-1px);
        }

        .connect-button:active {
            transform: translateY(0);
        }

        .connection-status {
            margin-top: 1rem;
            padding: 10px;
            border-radius: 8px;
            font-weight: bold;
            text-align: center;
        }

        .status-connected {
            background: rgba(52, 168, 83, 0.2);
            color: #34a853;
            border: 1px solid #34a853;
        }

        .status-disconnected {
            background: rgba(234, 67, 53, 0.2);
            color: #ea4335;
            border: 1px solid #ea4335;
        }

        .status-connecting {
            background: rgba(251, 188, 5, 0.2);
            color: #fbbc05;
            border: 1px solid #fbbc05;
        }

        /* Real-time Dashboard */
        .dashboard {
            padding: 100px 0;
            background: rgba(0, 0, 0, 0.3);
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-top: 3rem;
        }

        .metric-card {
            background: rgba(255, 255, 255, 0.1);
            padding: 2rem;
            border-radius: 15px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: transform 0.15s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .metric-card:hover {
            transform: translateY(-3px);
            background: rgba(255, 255, 255, 0.15);
        }

        .metric-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
        }

        .metric-value {
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .metric-label {
            font-size: 1.1rem;
            opacity: 0.8;
        }

        .metric-trend {
            font-size: 0.9rem;
            margin-top: 0.5rem;
        }

        .trend-up { color: #34a853; }
        .trend-down { color: #ea4335; }
        .trend-stable { color: #fbbc05; }

        /* Footer */
        footer {
            background: #0a0a0a;
            padding: 3rem 0;
            text-align: center;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .footer-content h3 {
            color: #4285f4;
            margin-bottom: 1rem;
        }

        /* Social Media Links */
        .social-media {
            margin: 2rem 0;
        }

        .social-media h3 {
            color: #4285f4;
            margin-bottom: 1.5rem;
            font-size: 1.3rem;
        }

        .social-links {
            display: flex;
            justify-content: center;
            gap: 1.5rem;
            flex-wrap: wrap;
        }

        .social-link {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 12px 20px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 25px;
            color: white;
            text-decoration: none;
            transition: all 0.3s ease;
            font-size: 0.9rem;
            font-weight: 500;
        }

        .social-link:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .social-link.instagram:hover {
            background: linear-gradient(45deg, #f09433, #e6683c, #dc2743, #cc2366, #bc1888);
            border-color: #e6683c;
        }

        .social-link.linkedin:hover {
            background: #0077b5;
            border-color: #0077b5;
        }

        .social-link.github:hover {
            background: #333;
            border-color: #333;
        }

        .social-link.website:hover {
            background: linear-gradient(45deg, #4285f4, #34a853);
            border-color: #4285f4;
        }

        .social-icon {
            width: 20px;
            height: 20px;
            fill: currentColor;
            flex-shrink: 0;
        }

        .social-icon svg {
            width: 100%;
            height: 100%;
        }

        /* Developer Credit */
        .developer-credit {
            margin: 2rem 0 1rem;
            padding: 1.5rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .developer-credit h4 {
            color: #4285f4;
            margin-bottom: 0.5rem;
            font-size: 1.1rem;
        }

        .developer-name {
            font-size: 1.2rem;
            font-weight: bold;
            color: #34a853;
            margin-bottom: 0.5rem;
        }

        .developer-title {
            color: rgba(255, 255, 255, 0.8);
            font-size: 0.9rem;
        }

        .demo-button {
            background: linear-gradient(45deg, #ea4335, #fbbc05);
            color: white;
            border: none;
            padding: 20px 50px;
            border-radius: 50px;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.15s ease;
            margin: 2rem 0;
            box-shadow: 0 6px 20px rgba(234, 67, 53, 0.3);
        }

        .demo-button:hover {
            transform: translateY(-2px);
        }

        .demo-button:active {
            transform: translateY(0);
        }

        .voice-button {
            background: linear-gradient(45deg, #4285f4, #34a853);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 20px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            min-width: 160px;
            position: relative;
            overflow: hidden;
        }

        .voice-button:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
        }

        .voice-button:active {
            transform: translateY(-1px) scale(1.02);
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .voice-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }

        .voice-button:hover::before {
            left: 100%;
        }

        .demo-status {
            margin-top: 2rem;
            font-size: 1.5rem;
            font-weight: bold;
        }

        /* Car Setup Section */
        .car-setup {
            padding: 100px 0;
            background: rgba(52, 168, 83, 0.1);
        }

        .setup-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-top: 3rem;
        }

        .setup-card {
            background: rgba(255, 255, 255, 0.1);
            padding: 2rem;
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            transition: transform 0.15s ease;
        }

        .setup-card:hover {
            transform: translateY(-3px);
        }

        .setup-form {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .form-group label {
            font-weight: bold;
            color: #4285f4;
        }

        .form-group input, .form-group select {
            padding: 12px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 1rem;
            transition: border-color 0.2s ease;
        }

        .form-group select {
            background: rgba(0, 0, 0, 0.7);
            color: white;
        }

        .form-group select option {
            background: #1a1a2e;
            color: white;
            padding: 10px;
        }

        .form-group input:focus, .form-group select:focus {
            outline: none;
            border-color: #4285f4;
            background: rgba(255, 255, 255, 0.15);
        }

        .form-group input::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }

        .connect-button {
            background: linear-gradient(45deg, #34a853, #4285f4);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.15s ease;
            box-shadow: 0 4px 15px rgba(52, 168, 83, 0.3);
        }

        .connect-button:hover {
            transform: translateY(-1px);
        }

        .connect-button:active {
            transform: translateY(0);
        }

        .connection-status {
            margin-top: 1rem;
            padding: 10px;
            border-radius: 8px;
            font-weight: bold;
            text-align: center;
        }

        .status-connected {
            background: rgba(52, 168, 83, 0.2);
            color: #34a853;
            border: 1px solid #34a853;
        }

        .status-disconnected {
            background: rgba(234, 67, 53, 0.2);
            color: #ea4335;
            border: 1px solid #ea4335;
        }

        .status-connecting {
            background: rgba(251, 188, 5, 0.2);
            color: #fbbc05;
            border: 1px solid #fbbc05;
        }

        /* Real-time Dashboard */
        .dashboard {
            padding: 100px 0;
            background: rgba(0, 0, 0, 0.3);
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-top: 3rem;
        }

        .metric-card {
            background: rgba(255, 255, 255, 0.1);
            padding: 2rem;
            border-radius: 15px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: transform 0.15s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .metric-card:hover {
            transform: translateY(-3px);
            background: rgba(255, 255, 255, 0.15);
        }

        .metric-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
        }

        .metric-value {
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .metric-label {
            font-size: 1.1rem;
            opacity: 0.8;
        }

        .metric-trend {
            font-size: 0.9rem;
            margin-top: 0.5rem;
        }

        .trend-up { color: #34a853; }
        .trend-down { color: #ea4335; }
        .trend-stable { color: #fbbc05; }

        /* Video Section */
        .videos {
            padding: 100px 0;
            background: rgba(234, 67, 53, 0.1);
        }

        .video-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem;
            margin-top: 3rem;
        }

        .video-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            transition: transform 0.15s ease;
        }

        .video-card:hover {
            transform: translateY(-3px);
        }

        .video-player {
            width: 100%;
            height: 200px;
            background: #000;
            position: relative;
            overflow: hidden;
        }

        .video-player video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .video-placeholder {
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, #1a1a2e, #16213e);
            display: flex;
            align-items: center;
            justify-content: center;
            color: rgba(255, 255, 255, 0.6);
            font-size: 3rem;
        }

        .video-info {
            padding: 1.5rem;
        }

        .video-title {
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
            color: #4285f4;
        }

        .video-description {
            color: rgba(255, 255, 255, 0.8);
            font-size: 0.9rem;
            line-height: 1.4;
        }

        /* Video Upload Section */
        .video-upload {
            background: rgba(255, 255, 255, 0.1);
            padding: 2rem;
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            margin-bottom: 3rem;
        }

        .upload-area {
            border: 2px dashed rgba(255, 255, 255, 0.3);
            border-radius: 10px;
            padding: 3rem;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .upload-area:hover {
            border-color: #4285f4;
            background: rgba(66, 133, 244, 0.1);
        }

        .upload-area.dragover {
            border-color: #34a853;
            background: rgba(52, 168, 83, 0.1);
        }

        .upload-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
            color: #4285f4;
        }

        .upload-text {
            font-size: 1.1rem;
            margin-bottom: 1rem;
        }

        .upload-hint {
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.9rem;
        }

        .file-input {
            display: none;
        }

        .upload-button {
            background: linear-gradient(45deg, #4285f4, #34a853);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.15s ease;
            margin-top: 1rem;
        }

        .upload-button:hover {
            transform: translateY(-1px);
        }

        /* Video Controls */
        .video-controls {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
            flex-wrap: wrap;
        }

        .control-button {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.3);
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.15s ease;
            font-size: 0.9rem;
        }

        .control-button:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-1px);
        }

        .control-button.active {
            background: #4285f4;
            border-color: #4285f4;
        }

        /* Footer */
        footer {
            background: #0a0a0a;
            padding: 3rem 0;
            text-align: center;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .footer-content h3 {
            color: #4285f4;
            margin-bottom: 1rem;
        }

        /* Social Media Links */
        .social-media {
            margin: 2rem 0;
        }

        .social-media h3 {
            color: #4285f4;
            margin-bottom: 1.5rem;
            font-size: 1.3rem;
        }

        .social-links {
            display: flex;
            justify-content: center;
            gap: 1.5rem;
            flex-wrap: wrap;
        }

        .social-link {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 12px 20px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 25px;
            color: white;
            text-decoration: none;
            transition: all 0.3s ease;
            font-size: 0.9rem;
            font-weight: 500;
        }

        .social-link:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .social-link.instagram:hover {
            background: linear-gradient(45deg, #f09433, #e6683c, #dc2743, #cc2366, #bc1888);
            border-color: #e6683c;
        }

        .social-link.linkedin:hover {
            background: #0077b5;
            border-color: #0077b5;
        }

        .social-link.github:hover {
            background: #333;
            border-color: #333;
        }

        .social-link.website:hover {
            background: linear-gradient(45deg, #4285f4, #34a853);
            border-color: #4285f4;
        }

        .social-icon {
            width: 20px;
            height: 20px;
            fill: currentColor;
            flex-shrink: 0;
        }

        .social-icon svg {
            width: 100%;
            height: 100%;
        }

        /* Developer Credit */
        .developer-credit {
            margin: 2rem 0 1rem;
            padding: 1.5rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .developer-credit h4 {
            color: #4285f4;
            margin-bottom: 0.5rem;
            font-size: 1.1rem;
        }

        .developer-name {
            font-size: 1.2rem;
            font-weight: bold;
            color: #34a853;
            margin-bottom: 0.5rem;
        }

        .developer-title {
            color: rgba(255, 255, 255, 0.8);
            font-size: 0.9rem;
        }

        /* Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes pulse {
            0%, 100% {
                transform: translateY(-50%) scale(1);
                opacity: 1;
            }
            50% {
                transform: translateY(-50%) scale(1.1);
                opacity: 0.8;
            }
        }

        @keyframes ripple {
            0% {
                opacity: 1;
                transform: translate(-50%, -50%) scale(0.8);
            }
            100% {
                opacity: 0;
                transform: translate(-50%, -50%) scale(1.2);
            }
        }

        /* Mobile Navigation */
        .mobile-menu-toggle {
            display: none;
            background: none;
            border: none;
            color: white;
            font-size: 1.8rem;
            cursor: pointer;
            padding: 12px;
            border-radius: 8px;
            transition: all 0.3s ease;
            position: absolute;
            right: 2rem;
            top: 50%;
            transform: translateY(-50%);
            z-index: 1001;
        }

        .mobile-menu-toggle:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-50%) scale(1.1);
        }

        .mobile-menu-toggle:active {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-50%) scale(0.95);
        }

        /* Hamburger animation */
        .mobile-menu-toggle.active {
            background: rgba(234, 67, 53, 0.2);
            border: 1px solid #ea4335;
            color: #ea4335;
        }

        /* Enhanced hamburger styling */
        .mobile-menu-toggle::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(45deg, rgba(66, 133, 244, 0.1), rgba(52, 168, 83, 0.1));
            z-index: -1;
            transition: all 0.3s ease;
            opacity: 0;
        }

        .mobile-menu-toggle:hover::before {
            opacity: 1;
            transform: translate(-50%, -50%) scale(1.2);
        }

        .nav-links.mobile-open {
            display: flex;
            flex-direction: column;
            position: fixed;
            top: 0;
            right: 0;
            width: 280px;
            height: 100vh;
            background: linear-gradient(135deg, rgba(0, 0, 0, 0.98) 0%, rgba(26, 26, 46, 0.98) 100%);
            padding: 80px 2rem 2rem;
            box-shadow: -5px 0 25px rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(10px);
            transform: translateX(0);
            transition: transform 0.3s ease;
            z-index: 1000;
            border-left: 1px solid rgba(255, 255, 255, 0.1);
        }

        .nav-links {
            transform: translateX(100%);
            transition: transform 0.3s ease;
        }

        .nav-links.mobile-open {
            transform: translateX(0);
        }

        .nav-links.mobile-open li {
            margin: 0.5rem 0;
            opacity: 0;
            animation: slideInRight 0.3s ease forwards;
        }

        .nav-links.mobile-open li:nth-child(1) { animation-delay: 0.1s; }
        .nav-links.mobile-open li:nth-child(2) { animation-delay: 0.15s; }
        .nav-links.mobile-open li:nth-child(3) { animation-delay: 0.2s; }
        .nav-links.mobile-open li:nth-child(4) { animation-delay: 0.25s; }
        .nav-links.mobile-open li:nth-child(5) { animation-delay: 0.3s; }
        .nav-links.mobile-open li:nth-child(6) { animation-delay: 0.35s; }
        .nav-links.mobile-open li:nth-child(7) { animation-delay: 0.4s; }

        .nav-links.mobile-open a {
            display: block;
            padding: 15px 20px;
            color: white;
            text-decoration: none;
            border-radius: 12px;
            transition: all 0.3s ease;
            font-size: 1.1rem;
            font-weight: 500;
            border: 1px solid transparent;
        }

        .nav-links.mobile-open a:hover {
            background: linear-gradient(45deg, #4285f4, #34a853);
            border-color: rgba(255, 255, 255, 0.2);
            transform: translateX(5px);
            box-shadow: 0 4px 15px rgba(66, 133, 244, 0.3);
        }

        /* Mobile menu overlay */
        .mobile-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 999;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .mobile-overlay.active {
            display: block;
            opacity: 1;
        }

        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        /* Responsive Design */
        @media (max-width: 1024px) {
            .container {
                padding: 0 15px;
            }

            .features-grid {
                grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
                gap: 2rem;
            }

            .setup-grid {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }

            .dashboard-grid {
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                gap: 1.5rem;
            }
        }

        @media (max-width: 768px) {
            /* Header & Navigation */
            nav {
                padding: 1rem;
            }

            .logo {
                font-size: 1.5rem;
            }

            .nav-links {
                display: none;
                position: fixed;
            }

            .mobile-menu-toggle {
                display: block;
                right: 1rem;
            }

            /* Hero Section */
            .hero {
                height: 100vh;
                padding: 80px 0 40px;
            }

            .hero h1 {
                font-size: 2.5rem;
                margin-bottom: 1rem;
            }

            .hero p {
                font-size: 1.1rem;
                margin-bottom: 2rem;
            }

            .voice-animation {
                display: none;
            }

            .cta-button {
                padding: 12px 30px;
                font-size: 1rem;
            }

            /* Sections */
            .features, .how-it-works, .demo, .car-setup, .dashboard {
                padding: 60px 0;
            }

            .section-title {
                font-size: 2rem;
                margin-bottom: 1rem;
            }

            /* Features */
            .features-grid {
                grid-template-columns: 1fr;
                gap: 2rem;
                margin-top: 2rem;
            }

            .feature-card {
                padding: 1.5rem;
            }

            .feature-icon {
                width: 60px;
                height: 60px;
                font-size: 1.5rem;
            }

            /* Steps */
            .steps {
                grid-template-columns: 1fr;
                gap: 2rem;
                margin-top: 2rem;
            }

            .step-number {
                width: 50px;
                height: 50px;
                font-size: 1.2rem;
            }

            /* Demo Section */
            .demo-button {
                padding: 15px 30px;
                font-size: 1rem;
                margin: 1rem 0.5rem;
                width: calc(100% - 1rem);
                max-width: 300px;
            }

            .demo-status {
                font-size: 1.2rem;
                margin-top: 1.5rem;
                padding: 0 1rem;
            }

            /* Dashboard */
            .dashboard-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 1rem;
            }

            .metric-card {
                padding: 1rem;
            }

            .metric-icon {
                font-size: 2rem;
            }

            .metric-value {
                font-size: 1.8rem;
            }



            /* Setup Cards */
            .setup-card {
                padding: 1.5rem;
            }

            .form-group input, .form-group select {
                padding: 10px;
                font-size: 1rem;
            }

            .connect-button {
                padding: 12px 25px;
                font-size: 1rem;
            }

            /* Footer */
            .footer-content {
                grid-template-columns: 1fr;
                gap: 1.5rem;
                text-align: center;
            }

            .social-links {
                gap: 1rem;
            }

            .social-link {
                padding: 10px 15px;
                font-size: 0.85rem;
            }

            .developer-credit {
                padding: 1rem;
                text-align: center;
            }
        }

        @media (max-width: 480px) {
            /* Extra small screens */
            .container {
                padding: 0 10px;
            }

            .hero h1 {
                font-size: 2rem;
                line-height: 1.2;
            }

            .hero p {
                font-size: 1rem;
            }

            .section-title {
                font-size: 1.8rem;
            }

            .demo-button {
                width: 100%;
                margin: 0.5rem 0;
                padding: 12px 20px;
            }

            .voice-button {
                width: 100%;
                margin: 0.5rem 0;
                padding: 10px 16px;
                font-size: 0.9rem;
                min-width: auto;
            }

            .dashboard-grid {
                grid-template-columns: 1fr;
                gap: 1rem;
            }

            .metric-card {
                padding: 1rem;
                text-align: center;
            }

            .social-links {
                flex-direction: column;
                align-items: center;
                gap: 0.8rem;
            }

            .social-link {
                width: 200px;
                justify-content: center;
            }

            /* Voice Commands Guide */
            .demo .container > div:last-child {
                text-align: center;
            }

            .demo .container > div:last-child > div {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }

            /* Form improvements */
            .setup-form {
                gap: 1rem;
            }

            .form-group label {
                font-size: 0.9rem;
            }


        }

        /* Touch-friendly improvements */
        @media (hover: none) and (pointer: coarse) {
            .feature-card:hover,
            .setup-card:hover,
            .metric-card:hover {
                transform: none;
            }

            .cta-button:hover,
            .demo-button:hover,
            .connect-button:hover {
                transform: none;
            }

            .nav-links a:hover {
                transform: none;
            }

            /* Larger touch targets */
            .demo-button,
            .cta-button,
            .connect-button,
            .voice-button {
                min-height: 44px;
                min-width: 44px;
            }

            .social-link {
                min-height: 44px;
            }
        }

        /* Landscape orientation on mobile */
        @media (max-width: 768px) and (orientation: landscape) {
            .hero {
                height: auto;
                min-height: 100vh;
                padding: 100px 0 60px;
            }

            .hero h1 {
                font-size: 2.2rem;
            }

            .features, .how-it-works, .demo, .car-setup, .dashboard {
                padding: 40px 0;
            }
        }
    </style>
</head>
<body>
    <!-- Mobile Menu Overlay -->
    <div class="mobile-overlay" id="mobileOverlay" onclick="closeMobileMenu()"></div>

    <header>
        <nav>
            <div class="logo">Car Contact Voice</div>
            <ul class="nav-links" id="navLinks">
                <li><a href="#home" onclick="closeMobileMenu()">🏠 Home</a></li>
                <li><a href="#features" onclick="closeMobileMenu()">⭐ Features</a></li>
                <li><a href="#how-it-works" onclick="closeMobileMenu()">⚙️ How It Works</a></li>
                <li><a href="#setup" onclick="closeMobileMenu()">🔧 Setup</a></li>
                <li><a href="#dashboard" onclick="closeMobileMenu()">📊 Dashboard</a></li>
                <li><a href="#demo" onclick="closeMobileMenu()">🎤 Demo</a></li>
            </ul>
            <button class="mobile-menu-toggle" onclick="toggleMobileMenu()" aria-label="Toggle menu">
                ☰
            </button>
        </nav>
    </header>

    <section id="home" class="hero">
        <div class="container">
            <div class="hero-content">
                <h1>Car Contact Voice</h1>
                <p>Start and stop your car engine with simple voice commands using advanced AI voice recognition. The future of automotive control is here.</p>
                <a href="#demo" class="cta-button">Try Voice Control</a>
            </div>
        </div>
        <div class="voice-animation">
            <div class="voice-circle"></div>
        </div>
    </section>

    <section id="features" class="features">
        <div class="container">
            <h2 class="section-title">Smart Features</h2>
            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-icon">🎤</div>
                    <h3>Voice Recognition</h3>
                    <p>Advanced voice recognition technology powered by Web Speech API for accurate command interpretation.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">🚗</div>
                    <h3>Remote Engine Control</h3>
                    <p>Start or stop your car engine from anywhere with simple voice commands like "start my car" or "turn off engine".</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">🔒</div>
                    <h3>Secure Connection</h3>
                    <p>Military-grade encryption ensures your vehicle remains secure while providing convenient voice control.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">📱</div>
                    <h3>Smart Integration</h3>
                    <p>Seamlessly integrates with your smartphone and web browser for unified voice control experience.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">⚡</div>
                    <h3>Instant Response</h3>
                    <p>Lightning-fast response times ensure your commands are executed immediately and reliably.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">🌐</div>
                    <h3>Cloud Connected</h3>
                    <p>Cloud-based system allows control from anywhere in the world with internet connectivity.</p>
                </div>
            </div>
        </div>
    </section>

    <section id="how-it-works" class="how-it-works">
        <div class="container">
            <h2 class="section-title">How It Works</h2>
            <div class="steps">
                <div class="step">
                    <div class="step-number">1</div>
                    <h3>Install Device</h3>
                    <p>Connect the Car Contact Voice module to your vehicle's engine control system.</p>
                </div>
                <div class="step">
                    <div class="step-number">2</div>
                    <h3>Open Web Interface</h3>
                    <p>Access the car voice control interface through your web browser and allow microphone permissions.</p>
                </div>
                <div class="step">
                    <div class="step-number">3</div>
                    <h3>Voice Commands</h3>
                    <p>Simply say "start my car" or "turn off my car engine" using the voice demo feature.</p>
                </div>
                <div class="step">
                    <div class="step-number">4</div>
                    <h3>Instant Control</h3>
                    <p>Your car responds immediately to voice commands with real-time status updates.</p>
                </div>
            </div>
        </div>
    </section>



    <section id="setup" class="car-setup">
        <div class="container">
            <h2 class="section-title">Connect Your Car</h2>
            <p style="text-align: center; margin-bottom: 2rem; opacity: 0.9;">
                Choose your connection method to start getting real-time data from your vehicle
            </p>
            <div class="setup-grid">
                <div class="setup-card">
                    <h3>🔌 OBD-II Connection</h3>
                    <p>Connect via OBD-II port for basic vehicle data</p>
                    <form class="setup-form" onsubmit="connectOBD(event)">
                        <div class="form-group">
                            <label>Connection Type</label>
                            <select id="obdType">
                                <option value="bluetooth">Bluetooth OBD-II</option>
                                <option value="wifi">WiFi OBD-II</option>
                                <option value="usb">USB OBD-II</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Bluetooth OBD</label>
                            <div id="bluetoothStatus" style="padding: 10px; margin: 10px 0; border-radius: 8px; background: rgba(52, 168, 83, 0.1); border: 1px solid #34a853; color: #34a853; text-align: center;">
                                🔵 Bluetooth Active
                            </div>

                            <!-- Available Bluetooth Devices List -->
                            <div id="bluetoothDevicesList" style="margin: 10px 0; max-height: 200px; overflow-y: auto;">
                                <div style="text-align: center; padding: 20px; color: rgba(255,255,255,0.7);">
                                    <div style="margin-bottom: 15px;">📡 Ready to scan for Bluetooth devices</div>
                                    <div style="display: flex; gap: 10px; justify-content: center; flex-wrap: wrap;">
                                        <button type="button" onclick="scanBluetoothDevices()" class="connect-button" style="background: linear-gradient(45deg, #4285f4, #34a853); padding: 8px 16px; font-size: 0.9rem;">
                                            🔍 Scan All Devices
                                        </button>
                                        <button type="button" onclick="scanOBDDevices()" class="connect-button" style="background: linear-gradient(45deg, #ff9800, #f44336); padding: 8px 16px; font-size: 0.9rem;">
                                            🚗 Scan OBD Only
                                        </button>
                                    </div>
                                    <div style="font-size: 0.8rem; margin-top: 10px; opacity: 0.8;">
                                        💡 Try "Scan All Devices" if OBD scan doesn't find your device
                                    </div>
                                </div>
                            </div>

                            <input type="hidden" id="obdAddress" value="">
                            <div style="display: flex; gap: 10px; justify-content: center; flex-wrap: wrap;">
                                <button type="submit" class="connect-button" style="background: linear-gradient(45deg, #ff9800, #f44336); flex: 1; min-width: 120px;" disabled id="connectOBDBtn">
                                    🔗 Connect OBD
                                </button>
                                <button type="button" class="connect-button" onclick="connectOBDManual()" style="background: linear-gradient(45deg, #2196F3, #4285f4); flex: 1; min-width: 120px;">
                                    📱 Manual Select
                                </button>
                                <button type="button" class="connect-button" onclick="connectUSBSerial()" style="background: linear-gradient(45deg, #9c27b0, #e91e63); flex: 1; min-width: 120px;">
                                    🔌 USB Serial
                                </button>
                            </div>
                            <div style="display: flex; gap: 10px; justify-content: center; flex-wrap: wrap; margin-top: 10px;">
                                <button type="button" class="connect-button" onclick="forceRealOBDConnection()" style="background: linear-gradient(135deg, #ff6b35, #f7931e); font-weight: bold; flex: 1; min-width: 140px;">
                                    🚗 Force Real OBD
                                </button>
                                <button type="button" class="connect-button" onclick="testRealDataReading()" style="background: linear-gradient(45deg, #34a853, #4caf50); flex: 1; min-width: 120px;">
                                    🧪 Test Connection
                                </button>
                            </div>

                        </div>
                    </form>
                    <div id="obdStatus" class="connection-status status-disconnected">
                        Not Connected
                    </div>
                </div>

                <div class="setup-card">
                    <h3>🚗 Manufacturer API</h3>
                    <p>Connect via your car manufacturer's official API</p>
                    <form class="setup-form" onsubmit="connectManufacturer(event)">
                        <div class="form-group">
                            <label>Car Brand</label>
                            <select id="carBrand">
                                <option value="">Select Brand</option>
                                <option value="tesla">Tesla</option>
                                <option value="ford">Ford (FordPass)</option>
                                <option value="gm">GM (OnStar)</option>
                                <option value="bmw">BMW (ConnectedDrive)</option>
                                <option value="hyundai">Hyundai (BlueLink)</option>
                                <option value="toyota">Toyota (Connected Services)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Username/Email</label>
                            <input type="email" id="manufacturerEmail" placeholder="your@email.com">
                        </div>
                        <div class="form-group">
                            <label>Password</label>
                            <input type="password" id="manufacturerPassword" placeholder="Password">
                        </div>
                        <button type="submit" class="connect-button">Connect API</button>
                    </form>
                    <div id="manufacturerStatus" class="connection-status status-disconnected">
                        Not Connected
                    </div>
                </div>

                <div class="setup-card">
                    <h3>🌐 Smartcar API</h3>
                    <p>Universal API supporting multiple car brands</p>
                    <form class="setup-form" onsubmit="connectSmartcar(event)">
                        <div class="form-group">
                            <label>API Key</label>
                            <input type="text" id="smartcarKey" placeholder="Your Smartcar API Key">
                        </div>
                        <div class="form-group">
                            <label>Vehicle ID</label>
                            <input type="text" id="smartcarVehicleId" placeholder="Vehicle ID">
                        </div>
                        <button type="submit" class="connect-button">Connect Smartcar</button>
                    </form>
                    <div id="smartcarStatus" class="connection-status status-disconnected">
                        Not Connected
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="dashboard" class="dashboard">
        <div class="container">
            <h2 class="section-title">Real-Time Dashboard</h2>
            <p style="text-align: center; margin-bottom: 2rem; opacity: 0.9;">
                Live data from your connected vehicle
            </p>
            <div class="dashboard-grid">
                <div class="metric-card">
                    <div class="metric-icon">🔋</div>
                    <div class="metric-value" id="batteryLevel">--</div>
                    <div class="metric-label">Battery Level</div>
                    <div class="metric-trend" id="batteryTrend">--</div>
                </div>
                <div class="metric-card">
                    <div class="metric-icon">⛽</div>
                    <div class="metric-value" id="fuelLevel">--</div>
                    <div class="metric-label">Fuel Level</div>
                    <div class="metric-trend" id="fuelTrend">--</div>
                </div>
                <div class="metric-card">
                    <div class="metric-icon">🌡️</div>
                    <div class="metric-value" id="engineTemp">--</div>
                    <div class="metric-label">Engine Temp</div>
                    <div class="metric-trend" id="tempTrend">--</div>
                </div>
                <div class="metric-card">
                    <div class="metric-icon">🏃</div>
                    <div class="metric-value" id="engineRPM">--</div>
                    <div class="metric-label">Engine RPM</div>
                    <div class="metric-trend" id="rpmTrend">--</div>
                </div>
                <div class="metric-card">
                    <div class="metric-icon">🚗</div>
                    <div class="metric-value" id="vehicleSpeed">--</div>
                    <div class="metric-label">Speed</div>
                    <div class="metric-trend" id="speedTrend">--</div>
                </div>
                <div class="metric-card">
                    <div class="metric-icon">📍</div>
                    <div class="metric-value" id="mileage">--</div>
                    <div class="metric-label">Mileage</div>
                    <div class="metric-trend" id="mileageTrend">--</div>
                </div>
            </div>
        </div>
    </section>

    <section id="demo" class="demo">
        <div class="container">
            <h2 class="section-title">🚗 Car Voice Assistant</h2>
            <p>Control your car with intelligent voice commands and get real-time status updates</p>

            <!-- Simple Voice Control -->
            <div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap; margin: 2rem 0; padding: 2rem; background: rgba(255,255,255,0.1); border-radius: 20px; backdrop-filter: blur(10px);">
                <h3 style="width: 100%; text-align: center; margin: 0 0 2rem 0; color: #fff; font-size: 1.4rem;">🎤 Voice Control</h3>

                <button onclick="sayHello()" style="padding: 15px 30px; background: linear-gradient(45deg, #4285f4, #34a853); color: white; border: none; border-radius: 50px; font-size: 1.1rem; cursor: pointer; transition: transform 0.2s; box-shadow: 0 4px 15px rgba(0,0,0,0.3);" onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">
                    👋 Say Hello
                </button>

                <button onclick="getCarStatus()" style="padding: 15px 30px; background: linear-gradient(45deg, #ff9800, #f44336); color: white; border: none; border-radius: 50px; font-size: 1.1rem; cursor: pointer; transition: transform 0.2s; box-shadow: 0 4px 15px rgba(0,0,0,0.3);" onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">
                    📊 Car Status
                </button>

                <button onclick="startVoiceCommands()" style="padding: 15px 30px; background: linear-gradient(45deg, #9c27b0, #e91e63); color: white; border: none; border-radius: 50px; font-size: 1.1rem; cursor: pointer; transition: transform 0.2s; box-shadow: 0 4px 15px rgba(0,0,0,0.3);" onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">
                    🎙️ Voice Commands
                </button>
            </div>

            <div id="voiceStatus" style="text-align: center; margin: 1rem 0; color: #4285f4; font-size: 1.1rem;">Ready for voice commands!</div>

            <!-- Voice Commands Guide -->
            <div style="background: rgba(255,255,255,0.05); border-radius: 15px; padding: 1.5rem; margin: 2rem 0; border: 1px solid rgba(255,255,255,0.1);">
                <h4 style="color: #4285f4; margin-bottom: 1rem; text-align: center;">🎙️ Available Voice Commands</h4>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem;">
                    <div style="background: rgba(52, 168, 83, 0.1); padding: 1rem; border-radius: 10px; border-left: 4px solid #34a853;">
                        <strong style="color: #34a853;">🚗 Engine Start:</strong><br>
                        <span style="color: rgba(255,255,255,0.8); font-size: 0.9rem;">
                            "Start engine"<br>
                            "Turn on engine"<br>
                            "Start car"
                        </span>
                    </div>
                    <div style="background: rgba(244, 67, 54, 0.1); padding: 1rem; border-radius: 10px; border-left: 4px solid #f44336;">
                        <strong style="color: #f44336;">🛑 Engine Stop:</strong><br>
                        <span style="color: rgba(255,255,255,0.8); font-size: 0.9rem;">
                            "Stop engine"<br>
                            "Turn off engine"<br>
                            "Shut down engine"
                        </span>
                    </div>
                    <div style="background: rgba(255, 152, 0, 0.1); padding: 1rem; border-radius: 10px; border-left: 4px solid #ff9800;">
                        <strong style="color: #ff9800;">📊 Status Check:</strong><br>
                        <span style="color: rgba(255,255,255,0.8); font-size: 0.9rem;">
                            "Check car status"<br>
                            "Car status"<br>
                            "Status report"
                        </span>
                    </div>
                </div>
            </div>

            <!-- COMMENTED AI VOICE CONTROLS SECTION -->
            <!-- Uncomment the section below to enable AI voice controls -->
            <!--
            <div style="margin: 2rem 0; text-align: center; background: rgba(255,255,255,0.1); padding: 1.5rem; border-radius: 15px;">
                <h3 style="color: #4285f4; margin-bottom: 1rem;">🤖 Advanced Robotic Voice Controls</h3>

                <div style="margin-bottom: 1rem;">
                    <label for="voiceSelect" style="color: white; margin-right: 1rem;">🎤 Select Robot Voice:</label>
                    <select id="voiceSelect" onchange="changeVoice()" style="padding: 8px; border-radius: 8px; background: #1a1a2e; color: white; border: 1px solid #4285f4;">
                        <option value="">Auto-Select Male Voice</option>
                    </select>
                    <button onclick="testVoice()" style="margin-left: 1rem; padding: 8px 16px; background: #ea4335; color: white; border: none; border-radius: 8px; cursor: pointer;">🔊 Test Voice</button>
                </div>

                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-top: 1rem;">
                    <div>
                        <label style="color: #34a853; display: block; margin-bottom: 0.5rem;">⚡ Speech Rate: <span id="rateValue">0.6</span></label>
                        <input type="range" id="speechRate" min="0.3" max="1.0" step="0.1" value="0.6" onchange="updateRoboticSettings()" style="width: 100%;">
                    </div>
                    <div>
                        <label style="color: #fbbc05; display: block; margin-bottom: 0.5rem;">🎵 Voice Pitch: <span id="pitchValue">0.4</span></label>
                        <input type="range" id="voicePitch" min="0.1" max="0.8" step="0.1" value="0.4" onchange="updateRoboticSettings()" style="width: 100%;">
                    </div>
                    <div>
                        <label style="color: #9c27b0; display: block; margin-bottom: 0.5rem;">🔧 Glitch Level: <span id="glitchValue">15%</span></label>
                        <input type="range" id="glitchLevel" min="0" max="30" step="5" value="15" onchange="updateRoboticSettings()" style="width: 100%;">
                    </div>
                </div>

                <div style="margin-top: 1rem;">
                    <label style="color: white; margin-right: 1rem;">🤖 Robotic Mode:</label>
                    <select id="roboticMode" onchange="updateRoboticSettings()" style="padding: 8px; border-radius: 8px; background: #1a1a2e; color: white; border: 1px solid #4285f4;">
                        <option value="standard">Standard Robot</option>
                        <option value="military">Military Protocol</option>
                        <option value="ai-core">AI Core System</option>
                        <option value="maintenance">Maintenance Bot</option>
                        <option value="security">Security System</option>
                    </select>
                    <button onclick="testRoboticMode()" style="margin-left: 1rem; padding: 8px 16px; background: #34a853; color: white; border: none; border-radius: 8px; cursor: pointer;">🎯 Test Mode</button>
                </div>

                <div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap; margin: 2rem 0;">
                    <button class="demo-button" onclick="startDemo()">🎤 Simulated Voice Demo</button>
                    <button class="demo-button" onclick="startRealVoiceDemo()" style="background: linear-gradient(45deg, #34a853, #4285f4);">🗣️ Real Voice Recognition</button>
                </div>
            </div>
            -->

            <div style="margin-top: 2rem; padding: 1.5rem; background: rgba(255,255,255,0.1); border-radius: 15px; text-align: left;">
                <h3 style="color: #4285f4; margin-bottom: 1rem;">🎯 Available Controls:</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem;">
                    <div>
                        <h4 style="color: #34a853;">🚗 Engine Control:</h4>
                        <ul style="margin: 0.5rem 0; padding-left: 1.5rem;">
                            <li>Start Engine</li>
                            <li>Stop Engine</li>
                        </ul>
                    </div>
                    <div>
                        <h4 style="color: #fbbc05;">📊 Status Monitoring:</h4>
                        <ul style="margin: 0.5rem 0; padding-left: 1.5rem;">
                            <li>Check car status</li>
                            <li>Detailed diagnostic scan</li>
                            <li>Quick status check</li>
                            <li>Battery level analysis</li>
                            <li>Fuel level analysis</li>
                            <li>Engine health monitoring</li>
                        </ul>
                    </div>
                    <div>
                        <h4 style="color: #4285f4;">🎒 Trunk Control:</h4>
                        <ul style="margin: 0.5rem 0; padding-left: 1.5rem;">
                            <li>Open trunk</li>
                            <li>Close trunk</li>
                        </ul>
                    </div>
                    <div>
                        <h4 style="color: #9c27b0;">🚀 Automated Sequence:</h4>
                        <ul style="margin: 0.5rem 0; padding-left: 1.5rem;">
                            <li>Run full system test</li>
                            <li>Complete car diagnostics</li>
                        </ul>
                    </div>
                </div>
                <p style="margin-top: 1rem; font-size: 0.9rem; opacity: 0.8;">
                    💡 <strong>Tip:</strong> Use the dashboard below to monitor real-time car data and system status.
                </p>

                <!-- COMMENTED VOICE COMMANDS SECTION -->
                <!-- Uncomment to show voice commands when AI voice is enabled -->
                <!--
                <div style="margin-top: 2rem; padding: 1.5rem; background: rgba(255,255,255,0.1); border-radius: 15px; text-align: left;">
                    <h3 style="color: #4285f4; margin-bottom: 1rem;">🎯 Voice Commands You Can Try:</h3>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem;">
                        <div>
                            <h4 style="color: #34a853;">🚗 Engine Control:</h4>
                            <ul style="margin: 0.5rem 0; padding-left: 1.5rem;">
                                <li>"Start my car"</li>
                                <li>"Turn off my car"</li>
                            </ul>
                        </div>
                        <div>
                            <h4 style="color: #fbbc05;">📊 Status Checks:</h4>
                            <ul style="margin: 0.5rem 0; padding-left: 1.5rem;">
                                <li>"Check car status"</li>
                                <li>"What's my battery level?"</li>
                                <li>"How much fuel do I have?"</li>
                            </ul>
                        </div>
                        <div>
                            <h4 style="color: #4285f4;">🎒 Trunk Control:</h4>
                            <ul style="margin: 0.5rem 0; padding-left: 1.5rem;">
                                <li>"Open trunk" (buka bagasi)</li>
                                <li>"Close trunk" (tutup bagasi)</li>
                            </ul>
                        </div>
                        <div>
                            <h4 style="color: #9c27b0;">🚀 Active All (Auto Sequence):</h4>
                            <ul style="margin: 0.5rem 0; padding-left: 1.5rem;">
                                <li>"Active all" - Runs: Engine On → Open Trunk → Close Trunk → Check Status → Engine Off</li>
                            </ul>
                        </div>
                        <div>
                            <h4 style="color: #ea4335;">❓ Help & Info:</h4>
                            <ul style="margin: 0.5rem 0; padding-left: 1.5rem;">
                                <li>"Hello" or "Hi"</li>
                                <li>"Help"</li>
                                <li>"What can you do?"</li>
                            </ul>
                        </div>
                    </div>
                    <p style="margin-top: 1rem; font-size: 0.9rem; opacity: 0.8;">
                        💡 <strong>Tip:</strong> The AI will speak back to you with detailed information about your car's status, including warnings for low battery or fuel levels.
                    </p>
                </div>
                -->
            </div>
        </div>
    </section>

    <footer>
        <div class="container">
            <div class="footer-content">
                <div>
                    <h3>Car Contact Voice</h3>
                    <p>Revolutionizing automotive control through voice technology</p>
                </div>
                <div>
                    <h3>Features</h3>
                    <p>Voice Control<br>Remote Access<br>Secure Connection</p>
                </div>
                <div>
                    <h3>Support</h3>
                    <p>Installation Guide<br>Troubleshooting<br>Customer Service</p>
                </div>
            </div>

            <!-- Social Media Section -->
            <div class="social-media">
                <h3>🌐 Connect With Me</h3>
                <div class="social-links">
                    <a href="https://instagram.com/j.s_nugroho" target="_blank" class="social-link instagram">
                        <span class="social-icon">
                            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
                            </svg>
                        </span>
                        <span>Instagram</span>
                    </a>
                    <a href="https://linkedin.com/in/jsnugroho" target="_blank" class="social-link linkedin">
                        <span class="social-icon">
                            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
                            </svg>
                        </span>
                        <span>LinkedIn</span>
                    </a>
                    <a href="https://github.com/jsnugroho" target="_blank" class="social-link github">
                        <span class="social-icon">
                            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                            </svg>
                        </span>
                        <span>GitHub</span>
                    </a>
                    <a href="https://jsnugroho.dev" target="_blank" class="social-link website">
                        <span class="social-icon">
                            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12 0C5.374 0 0 5.373 0 12s5.374 12 12 12 12-5.373 12-12S18.626 0 12 0zm5.568 13.8h-3.924c-.058 1.274-.167 2.499-.322 3.637 1.395-.573 2.593-1.497 3.426-2.637h.82zm-.82-3.6c-.833-1.14-2.031-2.064-3.426-2.637.155 1.138.264 2.363.322 3.637h3.924zm-8.73 0c.058-1.274.167-2.499.322-3.637-1.395.573-2.593 1.497-3.426 2.637h3.104zm0 3.6H4.914c.833 1.14 2.031 2.064 3.426 2.637-.155-1.138-.264-2.363-.322-3.637zm1.8-7.8c-.684 1.283-1.216 2.84-1.516 4.6h3.032c-.3-1.76-.832-3.317-1.516-4.6zm0 12c.684-1.283 1.216-2.84 1.516-4.6H8.302c.3 1.76.832 3.317 1.516 4.6zm3.2 0c.684-1.283 1.216-2.84 1.516-4.6h-3.032c.3 1.76.832 3.317 1.516 4.6zm0-12c-.684 1.283-1.216 2.84-1.516 4.6h3.032c-.3-1.76-.832-3.317-1.516-4.6z"/>
                            </svg>
                        </span>
                        <span>Website</span>
                    </a>
                </div>
            </div>

            <!-- Developer Credit -->
            <div class="developer-credit">
                <h4>👨‍💻 Developed By</h4>
                <div class="developer-name">jsnugroho</div>
                <div class="developer-title">Full Stack Developer & Car Technology Enthusiast</div>
            </div>

            <p>&copy; 2025 Car Contact Voice. All rights reserved.</p>
        </div>
    </footer>

    <script>
        // Real OBD-II Data Reader Class
        class OBDReader {
            constructor() {
                this.device = null;
                this.server = null;
                this.service = null;
                this.characteristic = null;
                this.connected = false;
                this.realMode = false;
                this.responseBuffer = '';
                this.commandQueue = [];
                this.isProcessingCommand = false;
                this.lastCommandTime = 0;
                this.minCommandInterval = 1000; // Minimum 1 second between commands
            }

            async connectBluetooth(deviceName) {
                console.log('🔗 Attempting to connect to real OBD device:', deviceName);

                // Reset connection state
                this.connected = false;
                this.realMode = false;

                try {
                    // Only try Web Bluetooth for now (Serial requires direct user gesture)
                    if ('bluetooth' in navigator) {
                        console.log('📱 Trying Web Bluetooth API connection...');
                        const success = await this.connectWebBluetooth(deviceName);
                        if (success) {
                            this.connected = true;
                            this.realMode = true;
                            console.log('✅ Real OBD Bluetooth connection established');
                            return true;
                        } else {
                            console.log('⚠️ Web Bluetooth connection failed, but continuing with basic connection');
                            // Even if full OBD setup fails, we can still try basic communication
                            if (this.device && this.device.gatt && this.device.gatt.connected) {
                                console.log('📱 Device is connected, attempting basic OBD communication...');
                                this.connected = true;
                                this.realMode = true;
                                return true;
                            }
                        }
                    }

                    console.log('🔄 Bluetooth connection unsuccessful, falling back to demo mode');

                } catch (error) {
                    console.error('❌ Real OBD connection failed:', error);
                    console.log('🔄 Falling back to demo mode due to connection error');
                }

                // Always return true and fall back to demo mode if real connection fails
                this.connected = true;
                this.realMode = false;
                console.log('📊 Using demo mode - simulated car data will be displayed');
                return true;
            }

            async connectSerial() {
                try {
                    // Request serial port (for USB OBD adapters)
                    this.port = await navigator.serial.requestPort();
                    await this.port.open({ baudRate: 38400 });

                    console.log('✅ Serial port opened');

                    // Initialize OBD protocol
                    await this.initializeOBD();

                    this.connected = true;
                    this.realMode = true;
                    console.log('✅ Real OBD Serial connection established');
                    return true;

                } catch (error) {
                    console.error('❌ Serial connection failed:', error);
                    throw error;
                }
            }

            async connectWebBluetooth(deviceName) {
                try {
                    console.log('🔍 Scanning for OBD Bluetooth devices...');

                    // Try specific OBD device filtering first
                    try {
                        console.log('🔍 Trying specific OBD device filters...');
                        this.device = await navigator.bluetooth.requestDevice({
                            filters: [
                                { namePrefix: 'OBD' },
                                { namePrefix: 'ELM' },
                                { namePrefix: 'OBDII' },
                                { namePrefix: 'V-LINK' },
                                { namePrefix: 'KONNWEI' },
                                { namePrefix: 'VEEPEAK' },
                                { namePrefix: 'BAFX' },
                                { services: ['0000fff0-0000-1000-8000-00805f9b34fb'] },
                                { services: ['00001101-0000-1000-8000-00805f9b34fb'] }
                            ],
                            optionalServices: [
                                '0000fff0-0000-1000-8000-00805f9b34fb',
                                '00001101-0000-1000-8000-00805f9b34fb',
                                '0000ffe0-0000-1000-8000-00805f9b34fb'
                            ]
                        });
                    } catch (filterError) {
                        console.log('⚠️ Specific filters failed, trying broader search...');
                        // Fallback to accept all devices if specific filtering fails
                        this.device = await navigator.bluetooth.requestDevice({
                            acceptAllDevices: true,
                            optionalServices: [
                                '0000fff0-0000-1000-8000-00805f9b34fb',
                                '00001101-0000-1000-8000-00805f9b34fb',
                                '0000ffe0-0000-1000-8000-00805f9b34fb'
                            ]
                        });
                    }

                    console.log('📱 Found OBD device:', this.device.name || 'Unknown Device');
                    console.log('🔗 Connecting to GATT server...');

                    this.server = await this.device.gatt.connect();
                    console.log('✅ GATT server connected');

                    // Try to find the correct service and characteristic for OBD communication
                    let serviceFound = false;

                    // Try common OBD service UUIDs
                    const serviceUUIDs = [
                        '0000fff0-0000-1000-8000-00805f9b34fb',
                        '00001101-0000-1000-8000-00805f9b34fb',
                        '0000ffe0-0000-1000-8000-00805f9b34fb'
                    ];

                    const characteristicUUIDs = [
                        '0000fff2-0000-1000-8000-00805f9b34fb',
                        '0000fff1-0000-1000-8000-00805f9b34fb',
                        '0000ffe1-0000-1000-8000-00805f9b34fb'
                    ];

                    for (const serviceUUID of serviceUUIDs) {
                        try {
                            console.log(`🔍 Trying service UUID: ${serviceUUID}`);
                            this.service = await this.server.getPrimaryService(serviceUUID);

                            for (const charUUID of characteristicUUIDs) {
                                try {
                                    console.log(`🔍 Trying characteristic UUID: ${charUUID}`);
                                    const characteristic = await this.service.getCharacteristic(charUUID);

                                    // Check characteristic properties
                                    const properties = characteristic.properties;
                                    console.log(`📋 Characteristic properties:`, {
                                        read: properties.read,
                                        write: properties.write,
                                        writeWithoutResponse: properties.writeWithoutResponse,
                                        notify: properties.notify
                                    });

                                    // Verify we can write to this characteristic
                                    if (properties.write || properties.writeWithoutResponse) {
                                        this.characteristic = characteristic;
                                        this.useWriteWithoutResponse = properties.writeWithoutResponse && !properties.write;
                                        console.log('✅ Found writable OBD characteristic');
                                        serviceFound = true;
                                        break;
                                    } else {
                                        console.log(`⚠️ Characteristic ${charUUID} not writable`);
                                    }
                                } catch (charError) {
                                    console.log(`⚠️ Characteristic ${charUUID} not found:`, charError.message);
                                }
                            }

                            if (serviceFound) break;

                        } catch (serviceError) {
                            console.log(`⚠️ Service ${serviceUUID} not found:`, serviceError.message);
                        }
                    }

                    if (!serviceFound) {
                        console.log('⚠️ No standard OBD services found, trying alternative approach...');

                        // Try to get all available services and characteristics
                        try {
                            const services = await this.server.getPrimaryServices();
                            console.log('📋 Available services:', services.length);

                            for (const service of services) {
                                console.log(`🔍 Checking service: ${service.uuid}`);
                                try {
                                    const characteristics = await service.getCharacteristics();
                                    console.log(`📋 Service ${service.uuid} has ${characteristics.length} characteristics`);

                                    for (const char of characteristics) {
                                        console.log(`🔍 Characteristic: ${char.uuid}`, {
                                            read: char.properties.read,
                                            write: char.properties.write,
                                            writeWithoutResponse: char.properties.writeWithoutResponse,
                                            notify: char.properties.notify
                                        });

                                        // Use the first writable characteristic we find
                                        if (char.properties.write || char.properties.writeWithoutResponse) {
                                            this.service = service;
                                            this.characteristic = char;
                                            this.useWriteWithoutResponse = char.properties.writeWithoutResponse && !char.properties.write;
                                            console.log('✅ Found usable characteristic for OBD communication');
                                            serviceFound = true;
                                            break;
                                        }
                                    }

                                    if (serviceFound) break;

                                } catch (charError) {
                                    console.log(`⚠️ Could not get characteristics for service ${service.uuid}`);
                                }
                            }
                        } catch (serviceError) {
                            console.log('⚠️ Could not enumerate services');
                        }
                    }

                    if (!serviceFound) {
                        console.log('⚠️ No standard OBD communication channel found');
                        console.log('💡 Device connected but may not be a standard OBD adapter');
                        console.log('🔄 Switching to demo mode for this device...');

                        // If no proper OBD communication found, switch to demo mode
                        this.realMode = false;
                        console.log('📱 Device connected in demo mode - will show simulated data');

                    } else {
                        // Initialize OBD protocol only if we found proper services
                        console.log('🔧 Initializing OBD protocol...');
                        try {
                            await this.initializeOBD();
                            console.log('✅ OBD protocol initialized successfully');
                        } catch (initError) {
                            console.log('⚠️ OBD initialization failed, switching to demo mode');
                            this.realMode = false;
                        }
                    }

                    console.log('✅ Bluetooth device connection established');
                    return true;

                } catch (error) {
                    console.error('❌ Bluetooth connection failed:', error);
                    return false;
                }
            }

            async initializeOBD() {
                try {
                    console.log('🔧 Initializing OBD-II protocol...');

                    // For Bluetooth connections, try a simpler initialization
                    if (this.characteristic) {
                        console.log('📱 Bluetooth OBD initialization...');

                        try {
                            // Simple test command first
                            await this.sendRawCommand('ATZ');
                            await this.delay(2000);

                            // Basic configuration
                            await this.sendRawCommand('ATE0');
                            await this.delay(500);

                            console.log('✅ Basic OBD-II protocol initialized for Bluetooth');
                        } catch (initError) {
                            console.log('⚠️ Advanced initialization failed, using basic mode');
                            // Continue anyway - some OBD devices work without full initialization
                        }
                    } else {
                        // Full initialization for serial connections
                        console.log('🔌 Serial OBD initialization...');
                        await this.sendRawCommand('ATZ');
                        await this.delay(2000);

                        await this.sendRawCommand('ATE0');
                        await this.sendRawCommand('ATL0');
                        await this.sendRawCommand('ATS0');
                        await this.sendRawCommand('ATSP0');
                        await this.sendRawCommand('ATAT1');

                        console.log('✅ Full OBD-II protocol initialized for Serial');
                    }

                } catch (error) {
                    console.error('⚠️ OBD initialization failed:', error);
                    console.log('🔄 Continuing with basic OBD mode...');
                    // Don't throw error - some devices work without full initialization
                }
            }

            delay(ms) {
                return new Promise(resolve => setTimeout(resolve, ms));
            }

            async readViaNotification() {
                return new Promise(async (resolve, reject) => {
                    try {
                        console.log('📥 Setting up notification listener for car ECU response...');

                        // Set up notification listener for car responses
                        let responseReceived = false;
                        let responseData = '';
                        let responseTimeout;

                        const handleNotification = (event) => {
                            const decoder = new TextDecoder();
                            const data = decoder.decode(event.target.value);
                            responseData += data;
                            console.log('📥 Car ECU notification data:', data);
                            console.log('📥 Accumulated response data:', responseData);

                            // Check for complete response patterns from car ECU
                            const cleanData = responseData.replace(/[\r\n\s]/g, '').toUpperCase();

                            // Look for complete OBD response patterns
                            if (cleanData.includes('>') ||
                                cleanData.match(/^41[0-9A-F]+/) ||
                                cleanData.includes('NODATA') ||
                                cleanData.includes('ERROR') ||
                                cleanData.includes('UNABLETOCONNECT') ||
                                cleanData.includes('BUSBUSY') ||
                                (cleanData.startsWith('41') && cleanData.length >= 6)) {

                                console.log('✅ Complete response received from car ECU:', cleanData);
                                responseReceived = true;

                                // Clear timeout
                                if (responseTimeout) {
                                    clearTimeout(responseTimeout);
                                }

                                // Clean up listener
                                this.characteristic.removeEventListener('characteristicvaluechanged', handleNotification);

                                // Stop notifications to save battery (non-blocking)
                                this.characteristic.stopNotifications().catch(stopError => {
                                    console.log('⚠️ Could not stop notifications:', stopError.message);
                                });

                                resolve(responseData.trim());
                            }
                        };

                        // Start notifications if supported
                        if (this.characteristic.properties.notify) {
                            console.log('📡 Starting notifications for car ECU responses...');
                            await this.characteristic.startNotifications();
                            this.characteristic.addEventListener('characteristicvaluechanged', handleNotification);

                            // Extended timeout for car ECU responses (5 seconds)
                            responseTimeout = setTimeout(async () => {
                                if (!responseReceived) {
                                    console.log('⏰ Timeout waiting for car ECU response');
                                    console.log('📥 Partial response received:', responseData);

                                    this.characteristic.removeEventListener('characteristicvaluechanged', handleNotification);

                                    // Stop notifications
                                    try {
                                        await this.characteristic.stopNotifications();
                                    } catch (stopError) {
                                        console.log('⚠️ Could not stop notifications on timeout');
                                    }

                                    resolve(responseData || 'NO DATA');
                                }
                            }, 5000);
                        } else {
                            console.log('⚠️ Notifications not supported by this OBD device');
                            resolve('NO DATA');
                        }

                    } catch (error) {
                        console.error('❌ Error setting up car ECU notification reading:', error);
                        reject(error);
                    }
                });
            }



            // Queue-based command sending to prevent GATT conflicts
            async sendRawCommand(command) {
                if (!this.realMode) {
                    // Demo mode - return immediately
                    console.log('⚠️ Demo mode - not sending real command:', command);
                    return 'OK';
                }

                // Add command to queue and wait for execution
                return new Promise((resolve, reject) => {
                    this.commandQueue.push({
                        command,
                        resolve,
                        reject,
                        timestamp: Date.now()
                    });

                    // Start processing queue if not already running
                    this.processCommandQueue();
                });
            }

            async processCommandQueue() {
                if (this.isProcessingCommand || this.commandQueue.length === 0) {
                    return;
                }

                this.isProcessingCommand = true;

                while (this.commandQueue.length > 0) {
                    const { command, resolve, reject } = this.commandQueue.shift();

                    try {
                        // Ensure minimum interval between commands
                        const timeSinceLastCommand = Date.now() - this.lastCommandTime;
                        if (timeSinceLastCommand < this.minCommandInterval) {
                            const waitTime = this.minCommandInterval - timeSinceLastCommand;
                            console.log(`⏱️ Waiting ${waitTime}ms before next command to prevent GATT conflicts...`);
                            await this.delay(waitTime);
                        }

                        console.log('📤 Processing queued OBD command:', command);
                        const response = await this.executeRawCommand(command);
                        this.lastCommandTime = Date.now();
                        resolve(response);

                    } catch (error) {
                        console.error('❌ Error executing queued command:', error);
                        reject(error);
                    }
                }

                this.isProcessingCommand = false;
            }

            async executeRawCommand(command) {
                console.log('📤 Executing real OBD command:', command);
                console.log('🔍 Communication Status Check:', {
                    hasPort: !!this.port,
                    hasCharacteristic: !!this.characteristic,
                    realMode: this.realMode,
                    connected: this.connected,
                    deviceConnected: this.device?.gatt?.connected
                });

                try {
                    if (this.port) {
                        // Serial communication for USB OBD adapters
                        console.log('🔌 Using Serial communication...');
                        const writer = this.port.writable.getWriter();
                        const reader = this.port.readable.getReader();

                        // Send command with carriage return
                        const encoder = new TextEncoder();
                        const commandWithCR = command + '\r';
                        await writer.write(encoder.encode(commandWithCR));
                        console.log('📤 Serial command sent:', commandWithCR);

                        // Wait for response
                        await this.delay(500);

                        // Read response
                        const { value } = await reader.read();
                        const decoder = new TextDecoder();
                        const response = decoder.decode(value);

                        writer.releaseLock();
                        reader.releaseLock();

                        console.log('📥 Serial response received:', response);
                        return response.trim();

                    } else if (this.characteristic) {
                        // Bluetooth communication for Bluetooth OBD adapters
                        console.log('📱 Using Bluetooth communication...');
                        console.log('🔍 Characteristic properties:', {
                            read: this.characteristic.properties.read,
                            write: this.characteristic.properties.write,
                            writeWithoutResponse: this.characteristic.properties.writeWithoutResponse,
                            notify: this.characteristic.properties.notify
                        });

                        const encoder = new TextEncoder();
                        const commandWithCR = command + '\r';
                        const commandBytes = encoder.encode(commandWithCR);

                        // Use appropriate write method based on characteristic properties
                        if (this.useWriteWithoutResponse) {
                            console.log('📤 Using writeValueWithoutResponse for command:', commandWithCR);
                            await this.characteristic.writeValueWithoutResponse(commandBytes);
                        } else {
                            console.log('📤 Using writeValue for command:', commandWithCR);
                            await this.characteristic.writeValue(commandBytes);
                        }

                        console.log('✅ Bluetooth command sent successfully');

                        // Wait for ELM327 to process
                        await this.delay(1500); // Increased delay for better reliability

                        // Try to read response if characteristic supports it
                        if (this.characteristic.properties.read) {
                            try {
                                const response = await this.characteristic.readValue();
                                const decoder = new TextDecoder();
                                const responseText = decoder.decode(response);
                                console.log('📥 Bluetooth response received:', responseText);
                                return responseText.trim();
                            } catch (readError) {
                                console.log('⚠️ Could not read response, using notification method');
                                // Fall back to notification-based reading
                                return await this.readViaNotification();
                            }
                        } else {
                            console.log('📥 Using notification-based reading for car response');
                            return await this.readViaNotification();
                        }
                    }

                    // Enhanced error message with debugging info
                    const errorDetails = {
                        hasPort: !!this.port,
                        hasCharacteristic: !!this.characteristic,
                        realMode: this.realMode,
                        connected: this.connected,
                        deviceName: this.device?.name || 'Unknown',
                        deviceConnected: this.device?.gatt?.connected
                    };

                    console.error('❌ No communication method available. Debug info:', errorDetails);
                    throw new Error(`No real OBD communication method available. Debug: ${JSON.stringify(errorDetails)}`);

                } catch (error) {
                    console.error('❌ Error executing real OBD command:', error);
                    throw error;
                }
            }

            async sendCommand(command) {
                if (!this.connected) {
                    throw new Error('OBD device not connected');
                }

                console.log('📤 Sending OBD command to REAL car:', command);
                console.log('🔍 Connection Status:', {
                    connected: this.connected,
                    realMode: this.realMode,
                    hasCharacteristic: !!this.characteristic,
                    hasPort: !!this.port,
                    deviceConnected: this.device?.gatt?.connected
                });

                // If not in real mode, return demo data that shows engine is OFF
                if (!this.realMode) {
                    console.log('⚠️ Demo mode - returning static OFF data');

                    // Return realistic "engine off" responses
                    switch (command) {
                        case '010C': // Engine RPM - always 0 when off
                            return '41 0C 00 00';
                        case '010D': // Vehicle Speed - always 0 when parked
                            return '41 0D 00';
                        case '0105': // Engine Coolant Temperature - ambient temp
                            return '41 05 46'; // ~30°C ambient
                        case '012F': // Fuel Level - static level
                            return '41 2F 80'; // 50%
                        case '0142': // Control Module Voltage - battery only
                            return '41 42 30 D4'; // ~12.5V
                        case '0100': // Supported PIDs test
                            return '41 00 BE 1F A8 13'; // Standard supported PIDs
                        default:
                            return 'NO DATA';
                    }
                }

                try {
                    // Send real OBD command to your car's ECU
                    console.log('🚗 Sending command to car ECU via OBD-II...');
                    const response = await this.sendRawCommand(command);

                    // Clean response from car
                    const cleanResponse = response
                        .replace(/[\r\n>]/g, '')
                        .replace(/\s+/g, ' ')
                        .replace(/\s/g, '')  // Remove all spaces for parsing
                        .trim()
                        .toUpperCase();

                    console.log('📥 Raw response from car ECU:', response);
                    console.log('📥 Cleaned response for parsing:', cleanResponse);

                    // Validate response format from car
                    if (cleanResponse.includes('NODATA') || cleanResponse.includes('ERROR') || cleanResponse.includes('?') || cleanResponse.length < 4) {
                        console.log('⚠️ Invalid response from car ECU:', cleanResponse);
                        return 'NO DATA';
                    }

                    // Check if response starts with expected format (41 XX for positive response)
                    if (cleanResponse.startsWith('41')) {
                        console.log('✅ Valid OBD response from car:', cleanResponse);
                        return cleanResponse;
                    } else {
                        console.log('⚠️ Unexpected response format from car:', cleanResponse);
                        return 'NO DATA';
                    }

                } catch (error) {
                    console.error('❌ Error communicating with car ECU:', error);
                    return 'NO DATA';
                }
            }

            async getEngineRPM() {
                try {
                    console.log('🚗 Requesting RPM data from car ECU...');
                    const response = await this.sendCommand('010C');
                    console.log('📥 RPM response from car:', response);

                    const rpm = this.parseRPM(response);
                    console.log('🔧 Parsed RPM value:', rpm);

                    return rpm;
                } catch (error) {
                    console.error('❌ Error getting RPM from car:', error);
                    return 0;
                }
            }

            async getVehicleSpeed() {
                try {
                    const response = await this.sendCommand('010D');
                    return this.parseSpeed(response);
                } catch (error) {
                    console.error('Error getting speed:', error);
                    return 0;
                }
            }

            async getCoolantTemp() {
                try {
                    const response = await this.sendCommand('0105');
                    return this.parseTemp(response);
                } catch (error) {
                    console.error('Error getting temperature:', error);
                    return 70;
                }
            }

            async getFuelLevel() {
                try {
                    const response = await this.sendCommand('012F');
                    return this.parseFuelLevel(response);
                } catch (error) {
                    console.error('Error getting fuel level:', error);
                    return 50;
                }
            }

            async getBatteryVoltage() {
                try {
                    const response = await this.sendCommand('0142');
                    return this.parseBatteryVoltage(response);
                } catch (error) {
                    console.error('Error getting battery voltage:', error);
                    return 12.6;
                }
            }

            // Parse OBD-II responses
            parseRPM(response) {
                if (response === 'NO DATA') return 0;
                const hex = response.replace(/\s/g, '').substring(4);
                const a = parseInt(hex.substring(0, 2), 16);
                const b = parseInt(hex.substring(2, 4), 16);
                return ((a * 256) + b) / 4;
            }

            parseSpeed(response) {
                if (response === 'NO DATA') return 0;
                const hex = response.replace(/\s/g, '').substring(4);
                const speed = parseInt(hex.substring(0, 2), 16);
                return speed * 0.621371; // Convert km/h to mph
            }

            parseTemp(response) {
                if (response === 'NO DATA') return 70;
                const hex = response.replace(/\s/g, '').substring(4);
                const temp = parseInt(hex.substring(0, 2), 16);
                return (temp - 40) * 9/5 + 32; // Convert to Fahrenheit
            }

            parseFuelLevel(response) {
                if (response === 'NO DATA') return 50;
                const hex = response.replace(/\s/g, '').substring(4);
                const level = parseInt(hex.substring(0, 2), 16);
                return (level * 100) / 255;
            }

            parseBatteryVoltage(response) {
                if (response === 'NO DATA') return 12.6;
                const hex = response.replace(/\s/g, '').substring(4);
                const a = parseInt(hex.substring(0, 2), 16);
                const b = parseInt(hex.substring(2, 4), 16);
                return ((a * 256) + b) / 1000;
            }

            // Utility function for delays
            delay(ms) {
                return new Promise(resolve => setTimeout(resolve, ms));
            }

            disconnect() {
                this.connected = false;
                this.device = null;
                console.log('🔌 OBD device disconnected');
            }
        }

        // Car Data Integration System
        class CarDataManager {
            constructor() {
                this.connections = {
                    obd: { connected: false, data: null, device: null },
                    manufacturer: { connected: false, data: null },
                    smartcar: { connected: false, data: null }
                };
                this.realTimeData = {
                    batteryLevel: 0,
                    fuelLevel: 0,
                    engineTemp: 0,
                    engineRPM: 0,
                    vehicleSpeed: 0,
                    mileage: 0,
                    engineRunning: false
                };
                this.updateInterval = null;
                this.obdReader = null;
                this.initializeSimulatedData();
            }

            // Initialize with simulated data for demo purposes
            initializeSimulatedData() {
                this.realTimeData = {
                    batteryLevel: 85,
                    fuelLevel: 67,
                    engineTemp: 195,
                    engineRPM: 0,
                    vehicleSpeed: 0,
                    mileage: 45230,
                    engineRunning: false
                };
                this.updateDashboard();
            }

            // OBD-II Connection with Real Data Reading
            async connectOBD(type, address) {
                const statusEl = document.getElementById('obdStatus');
                statusEl.textContent = 'Connecting to OBD device...';
                statusEl.className = 'connection-status status-connecting';

                try {
                    // Initialize OBD reader
                    this.obdReader = new OBDReader();

                    // Show user instructions
                    console.log('📋 OBD Connection Instructions:');
                    console.log('1. Make sure your OBD device is plugged into your car');
                    console.log('2. Turn on your car (ignition on)');
                    console.log('3. Make sure OBD device is paired with your computer/phone');
                    console.log('4. Select your OBD device from the list that appears');

                    // Try to connect to the OBD device
                    const connected = await this.obdReader.connectBluetooth(address);

                    if (connected) {
                        this.connections.obd.connected = true;
                        this.connections.obd.device = address;
                        this.connections.obd.data = {
                            type: type,
                            address: address,
                            protocol: 'ISO 15765-4 (CAN 11/500)',
                            supportedPIDs: ['010C', '010D', '0105', '012F', '0142']
                        };

                        // Check if we have a real OBD connection
                        if (this.obdReader.realMode && (this.obdReader.characteristic || this.obdReader.port)) {
                            statusEl.textContent = `🟢 REAL OBD DATA - ${type.toUpperCase()} Connected`;
                            statusEl.style.background = 'rgba(52, 168, 83, 0.3)';
                            statusEl.style.color = '#34a853';
                            statusEl.style.fontWeight = 'bold';
                            console.log('✅ Real OBD mode confirmed - will read actual car data');
                            console.log('🚗 Connected to device:', this.obdReader.device?.name || 'Unknown Device');
                        } else {
                            statusEl.textContent = `🟡 DEMO MODE - ${type.toUpperCase()} (No Real OBD Device)`;
                            statusEl.style.background = 'rgba(255, 152, 0, 0.3)';
                            statusEl.style.color = '#ff9800';
                            statusEl.style.fontWeight = 'bold';
                            console.log('⚠️ Demo mode - using simulated data');
                        }
                        statusEl.className = 'connection-status status-connected';

                        // Start reading real OBD data
                        this.startRealOBDDataReading();
                        return true;
                    } else {
                        throw new Error('OBD connection failed');
                    }
                } catch (error) {
                    console.error('❌ OBD connection error:', error);

                    if (error.message.includes('cancelled') || error.message.includes('No port selected')) {
                        statusEl.textContent = '⚠️ Connection Cancelled - Try Again';
                        statusEl.style.background = 'rgba(255, 152, 0, 0.3)';
                        statusEl.style.color = '#ff9800';
                        console.log('💡 Tip: Make sure to select your OBD device from the list');
                    } else {
                        statusEl.textContent = 'Connection Failed - Using Demo Data';
                        statusEl.style.background = 'rgba(255, 152, 0, 0.3)';
                        statusEl.style.color = '#ff9800';
                    }
                    statusEl.className = 'connection-status status-connecting';

                    // Fallback to simulated data
                    this.connections.obd.connected = true;
                    this.startRealTimeUpdates();
                    return true;
                }
            }

            // Manufacturer API Connection Simulation
            async connectManufacturerAPI(brand, email, password) {
                const statusEl = document.getElementById('manufacturerStatus');
                statusEl.textContent = 'Authenticating...';
                statusEl.className = 'connection-status status-connecting';

                await new Promise(resolve => setTimeout(resolve, 3000));

                const success = Math.random() > 0.4; // 60% success rate

                if (success) {
                    this.connections.manufacturer.connected = true;
                    statusEl.textContent = `Connected to ${brand.toUpperCase()}`;
                    statusEl.className = 'connection-status status-connected';
                    this.startRealTimeUpdates();
                    return true;
                } else {
                    statusEl.textContent = 'Authentication Failed';
                    statusEl.className = 'connection-status status-disconnected';
                    return false;
                }
            }

            // Smartcar API Connection Simulation
            async connectSmartcarAPI(apiKey, vehicleId) {
                const statusEl = document.getElementById('smartcarStatus');
                statusEl.textContent = 'Connecting...';
                statusEl.className = 'connection-status status-connecting';

                await new Promise(resolve => setTimeout(resolve, 2500));

                const success = Math.random() > 0.2; // 80% success rate

                if (success) {
                    this.connections.smartcar.connected = true;
                    statusEl.textContent = 'Connected via Smartcar';
                    statusEl.className = 'connection-status status-connected';
                    this.startRealTimeUpdates();
                    return true;
                } else {
                    statusEl.textContent = 'API Connection Failed';
                    statusEl.className = 'connection-status status-disconnected';
                    return false;
                }
            }

            // Start real OBD data reading
            startRealOBDDataReading() {
                if (this.updateInterval) return;

                console.log('🚗 Starting real OBD data reading...');

                this.updateInterval = setInterval(async () => {
                    await this.readRealOBDData();
                    this.updateDashboard();
                }, 3000); // Update every 3 seconds for real OBD data
            }

            // Read real data from OBD device
            async readRealOBDData() {
                if (!this.obdReader || !this.obdReader.connected) {
                    console.log('⚠️ OBD reader not connected, falling back to simulation');
                    this.simulateRealTimeData();
                    return;
                }

                // Check if we're in real mode
                if (!this.obdReader.realMode) {
                    console.log('⚠️ OBD reader in demo mode, using simulated data');
                    this.simulateRealTimeData();
                    return;
                }

                try {
                    console.log('📊 Reading REAL OBD data from car...');
                    console.log('🔍 OBD Reader Status:', {
                        connected: this.obdReader.connected,
                        realMode: this.obdReader.realMode,
                        hasCharacteristic: !!this.obdReader.characteristic,
                        hasPort: !!this.obdReader.port,
                        deviceName: this.obdReader.device?.name || 'Unknown'
                    });

                    // Test connection first
                    console.log('🧪 Testing OBD connection with supported PIDs command...');
                    const testResponse = await this.obdReader.sendCommand('0100'); // Supported PIDs test
                    console.log('📥 Test response:', testResponse);

                    if (testResponse === 'NO DATA' || testResponse.includes('ERROR')) {
                        console.log('⚠️ OBD connection test failed, falling back to simulation');
                        this.simulateRealTimeData();
                        return;
                    }

                    console.log('✅ OBD connection test passed, reading real data...');

                    // Read real OBD data from your car ONE AT A TIME to prevent GATT conflicts
                    console.log('📊 Reading individual car parameters sequentially...');

                    console.log('🔧 Reading RPM...');
                    const rpm = await this.obdReader.getEngineRPM();
                    await this.delay(200); // Small delay between readings

                    console.log('🚗 Reading speed...');
                    const speed = await this.obdReader.getVehicleSpeed();
                    await this.delay(200);

                    console.log('🌡️ Reading temperature...');
                    const temp = await this.obdReader.getCoolantTemp();
                    await this.delay(200);

                    console.log('⛽ Reading fuel level...');
                    const fuel = await this.obdReader.getFuelLevel();
                    await this.delay(200);

                    console.log('🔋 Reading battery voltage...');
                    const voltage = await this.obdReader.getBatteryVoltage();

                    // Update real-time data with actual OBD readings from your car
                    this.realTimeData.engineRPM = rpm;
                    this.realTimeData.vehicleSpeed = speed;
                    this.realTimeData.engineTemp = temp;
                    this.realTimeData.fuelLevel = fuel;
                    this.realTimeData.batteryLevel = Math.min(100, (voltage / 14.4) * 100);

                    // Determine if engine is running based on REAL RPM from car
                    this.realTimeData.engineRunning = rpm > 300;

                    console.log('🚗 REAL CAR DATA UPDATED:', {
                        rpm: Math.round(rpm),
                        speed: Math.round(speed),
                        temp: Math.round(temp),
                        fuel: Math.round(fuel),
                        battery: Math.round(this.realTimeData.batteryLevel),
                        engineRunning: this.realTimeData.engineRunning,
                        source: 'REAL OBD DEVICE'
                    });

                } catch (error) {
                    console.error('❌ Error reading REAL OBD data:', error);
                    console.log('🔄 Falling back to simulation due to OBD read error');
                    this.simulateRealTimeData();
                }
            }

            // Start real-time data updates (fallback simulation)
            startRealTimeUpdates() {
                if (this.updateInterval) return;

                this.updateInterval = setInterval(() => {
                    this.simulateRealTimeData();
                    this.updateDashboard();
                }, 2000); // Update every 2 seconds
            }

            // Simulate real-time data changes
            simulateRealTimeData() {
                if (this.realTimeData.engineRunning) {
                    // Engine is running - simulate realistic changes
                    this.realTimeData.engineRPM = 800 + Math.random() * 2000;
                    this.realTimeData.vehicleSpeed = Math.max(0, this.realTimeData.vehicleSpeed + (Math.random() - 0.5) * 10);
                    this.realTimeData.engineTemp = Math.min(220, Math.max(180, this.realTimeData.engineTemp + (Math.random() - 0.5) * 5));
                    this.realTimeData.fuelLevel = Math.max(0, this.realTimeData.fuelLevel - Math.random() * 0.1);
                    this.realTimeData.batteryLevel = Math.min(100, Math.max(70, this.realTimeData.batteryLevel + (Math.random() - 0.5) * 2));
                } else {
                    // Engine is off
                    this.realTimeData.engineRPM = 0;
                    this.realTimeData.vehicleSpeed = 0;
                    this.realTimeData.engineTemp = Math.max(70, this.realTimeData.engineTemp - 1);
                    this.realTimeData.batteryLevel = Math.max(70, this.realTimeData.batteryLevel - Math.random() * 0.5);
                }
            }

            // Update dashboard display
            updateDashboard() {
                document.getElementById('batteryLevel').textContent = Math.round(this.realTimeData.batteryLevel) + '%';
                document.getElementById('fuelLevel').textContent = Math.round(this.realTimeData.fuelLevel) + '%';
                document.getElementById('engineTemp').textContent = Math.round(this.realTimeData.engineTemp) + '°F';
                document.getElementById('engineRPM').textContent = Math.round(this.realTimeData.engineRPM);
                document.getElementById('vehicleSpeed').textContent = Math.round(this.realTimeData.vehicleSpeed) + ' mph';
                document.getElementById('mileage').textContent = this.realTimeData.mileage.toLocaleString() + ' mi';

                // Update trends (simplified)
                this.updateTrends();
            }

            updateTrends() {
                const trends = ['batteryTrend', 'fuelTrend', 'tempTrend', 'rpmTrend', 'speedTrend', 'mileageTrend'];
                trends.forEach(trendId => {
                    const element = document.getElementById(trendId);
                    const rand = Math.random();
                    if (rand < 0.33) {
                        element.textContent = '↗ Increasing';
                        element.className = 'metric-trend trend-up';
                    } else if (rand < 0.66) {
                        element.textContent = '↘ Decreasing';
                        element.className = 'metric-trend trend-down';
                    } else {
                        element.textContent = '→ Stable';
                        element.className = 'metric-trend trend-stable';
                    }
                });
            }

            // Utility function for delays
            delay(ms) {
                return new Promise(resolve => setTimeout(resolve, ms));
            }

            // Engine control methods
            startEngine() {
                this.realTimeData.engineRunning = true;
                this.realTimeData.engineRPM = 800;
                return "🚗 Starting your car engine... Engine started successfully!";
            }

            stopEngine() {
                this.realTimeData.engineRunning = false;
                this.realTimeData.engineRPM = 0;
                this.realTimeData.vehicleSpeed = 0;
                return "🛑 Turning off your car engine... Engine stopped safely!";
            }

            getCarStatus() {
                const status = this.realTimeData.engineRunning ? 'running' : 'stopped';
                return `📊 Your car engine is currently ${status}. Battery: ${Math.round(this.realTimeData.batteryLevel)}%, Fuel: ${Math.round(this.realTimeData.fuelLevel)}%`;
            }

            isConnected() {
                return this.connections.obd.connected ||
                       this.connections.manufacturer.connected ||
                       this.connections.smartcar.connected;
            }
        }

        // Initialize Car Data Manager
        const carDataManager = new CarDataManager();

        // Test function to manually trigger real data reading
        async function testRealDataReading() {
            try {
                console.log('🔍 MANUAL TEST: Function called successfully!');
                console.log('🔍 MANUAL TEST: Testing data reading...');

                // Add visual feedback
                alert('🔍 Test button clicked! Check console for detailed logs.');

                if (!carDataManager) {
                    console.log('❌ Car Data Manager not initialized');
                    alert('❌ Car Data Manager not initialized');
                    return;
                }

                if (!carDataManager.obdReader) {
                    console.log('❌ No OBD reader available - please connect first');
                    alert('⚠️ No OBD device connected!\n\nTo read REAL car data:\n1. Connect OBD device to your car\n2. Click "📱 Manual Select" to connect\n3. Then test again');
                    return;
                }

                console.log('🔍 DETAILED OBD Reader Status Check:');
                console.log('📊 Connection Status:', {
                    connected: carDataManager.obdReader.connected,
                    realMode: carDataManager.obdReader.realMode,
                    hasCharacteristic: !!carDataManager.obdReader.characteristic,
                    hasPort: !!carDataManager.obdReader.port,
                    deviceName: carDataManager.obdReader.device?.name || 'Unknown',
                    deviceId: carDataManager.obdReader.device?.id || 'Unknown'
                });

                // Show current connection mode
                if (carDataManager.obdReader.realMode) {
                    console.log('🟢 REAL MODE: Connected to actual OBD device');
                    alert('🟢 REAL MODE DETECTED!\nReading actual car data from OBD device...');
                } else {
                    console.log('🟡 DEMO MODE: Using simulated data');
                    alert('🟡 DEMO MODE DETECTED!\nNo real OBD device found.\n\nTo get real car data:\n1. Connect OBD adapter to your car\n2. Use "📱 Manual Select" to connect\n3. Make sure car engine is running');
                }

                // Test based on the mode
                if (carDataManager.obdReader.realMode) {
                    console.log('🧪 MANUAL TEST: Testing REAL OBD communication...');
                    console.log('🚗 Attempting to read REAL data from your car...');

                    // Force real data reading
                    await carDataManager.readRealOBDData();

                    console.log('✅ MANUAL TEST: Real OBD data reading completed');
                    console.log('📊 Current Real-Time Data:', carDataManager.realTimeData);

                    alert(`✅ REAL CAR DATA READ!\n\nRPM: ${Math.round(carDataManager.realTimeData.engineRPM)}\nSpeed: ${Math.round(carDataManager.realTimeData.vehicleSpeed)} mph\nTemp: ${Math.round(carDataManager.realTimeData.engineTemp)}°F\nFuel: ${Math.round(carDataManager.realTimeData.fuelLevel)}%`);
                } else {
                    console.log('🧪 MANUAL TEST: Testing DEMO mode communication...');
                    await carDataManager.readRealOBDData();
                    console.log('✅ MANUAL TEST: Demo data reading completed');

                    alert('✅ Demo test completed!\nShowing simulated car data.\n\nConnect a real OBD device to see actual car data.');
                }

            } catch (error) {
                console.error('❌ MANUAL TEST: Error during data reading:', error);
                alert('❌ Error: ' + error.message);
            }
        }

        // Force Real OBD Connection Function
        async function forceRealOBDConnection() {
            try {
                console.log('🔧 FORCE REAL OBD: Attempting to connect to real OBD device...');
                alert('🔧 Attempting to connect to REAL OBD device...\n\nMake sure:\n1. OBD adapter is plugged into your car\n2. Car engine is running\n3. OBD device is paired with your computer');

                // Try USB/Serial connection first
                if (navigator.serial) {
                    try {
                        console.log('🔌 Trying USB/Serial OBD connection...');
                        const obdReader = new OBDReader();

                        // Request serial port directly
                        obdReader.port = await navigator.serial.requestPort();
                        await obdReader.port.open({ baudRate: 38400 });

                        console.log('✅ Serial port opened successfully');

                        // Set up the connection
                        obdReader.connected = true;
                        obdReader.realMode = true;

                        // Initialize OBD protocol
                        await obdReader.initializeOBD();

                        // Connect using the serial connection
                        carDataManager.obdReader = obdReader;
                        carDataManager.connections.obd.connected = true;
                        carDataManager.connections.obd.device = 'USB Serial OBD';

                        // Update status
                        const statusEl = document.getElementById('obdStatus');
                        statusEl.textContent = '🟢 REAL OBD DATA - USB Serial Connected';
                        statusEl.style.background = 'rgba(52, 168, 83, 0.3)';
                        statusEl.style.color = '#34a853';
                        statusEl.style.fontWeight = 'bold';

                        console.log('✅ REAL OBD USB connection established!');
                        alert('✅ REAL OBD USB CONNECTION SUCCESSFUL!\n\nYour car data will now be read from the actual OBD device.\n\nClick the test button to verify!');

                        // Start real data reading
                        carDataManager.startRealOBDDataReading();

                        return true;

                    } catch (serialError) {
                        console.log('⚠️ USB/Serial connection failed:', serialError);
                    }
                }

                // Try Bluetooth connection
                if (navigator.bluetooth) {
                    try {
                        console.log('📱 Trying Bluetooth OBD connection...');

                        const device = await navigator.bluetooth.requestDevice({
                            filters: [
                                { namePrefix: 'OBDII' },
                                { namePrefix: 'ELM327' },
                                { namePrefix: 'OBD' },
                                { namePrefix: 'obd' },
                                { namePrefix: 'elm' },
                                { namePrefix: 'Elm' },
                                { namePrefix: 'ELM' },
                                { namePrefix: 'HC-05' },
                                { namePrefix: 'HC-06' },
                                { namePrefix: 'ESP32' }
                            ],
                            optionalServices: [
                                '0000fff0-0000-1000-8000-00805f9b34fb',
                                '00001101-0000-1000-8000-00805f9b34fb'
                            ]
                        });

                        console.log('📱 Bluetooth device selected:', device.name);

                        const obdReader = new OBDReader();
                        const connected = await obdReader.connectWebBluetooth(device.name);

                        if (connected && obdReader.realMode) {
                            carDataManager.obdReader = obdReader;
                            carDataManager.connections.obd.connected = true;
                            carDataManager.connections.obd.device = device.name;

                            // Update status
                            const statusEl = document.getElementById('obdStatus');
                            statusEl.textContent = `🟢 REAL OBD DATA - ${device.name} Connected`;
                            statusEl.style.background = 'rgba(52, 168, 83, 0.3)';
                            statusEl.style.color = '#34a853';
                            statusEl.style.fontWeight = 'bold';

                            console.log('✅ REAL OBD Bluetooth connection established!');
                            alert(`✅ REAL OBD BLUETOOTH CONNECTION SUCCESSFUL!\n\nConnected to: ${device.name}\n\nYour car data will now be read from the actual OBD device.\n\nClick the test button to verify!`);

                            // Start real data reading
                            carDataManager.startRealOBDDataReading();

                            return true;
                        }

                    } catch (bluetoothError) {
                        console.log('⚠️ Bluetooth connection failed:', bluetoothError);
                    }
                }

                alert('❌ Could not establish real OBD connection.\n\nPossible issues:\n1. No OBD device connected to car\n2. OBD device not paired\n3. Car engine not running\n4. Browser doesn\'t support Web Serial/Bluetooth');
                return false;

            } catch (error) {
                console.error('❌ Force real OBD connection failed:', error);
                alert('❌ Error connecting to real OBD device: ' + error.message);
                return false;
            }
        }

        // Make functions globally accessible for debugging
        window.testRealDataReading = testRealDataReading;
        window.forceRealOBDConnection = forceRealOBDConnection;

        // Debug: Log when script loads
        console.log('🚗 Car Voice App loaded successfully');
        console.log('🔧 testRealDataReading function available:', typeof testRealDataReading);
        console.log('🔧 forceRealOBDConnection function available:', typeof forceRealOBDConnection);
        console.log('🔧 carDataManager initialized:', !!carDataManager);
        console.log('');
        console.log('🚗 TO CONNECT TO YOUR REAL CAR:');
        console.log('1. Make sure OBD adapter is plugged into your car');
        console.log('2. Turn on your car engine');
        console.log('3. Click "📱 Manual Select" button');
        console.log('4. Select your OBD device from the list');
        console.log('5. Click the test button to verify real data');
        console.log('');

        // Video Upload and Management System
        class VideoManager {
            constructor() {
                this.uploadedVideos = [];
                this.setupDragAndDrop();
            }

            setupDragAndDrop() {
                const uploadArea = document.querySelector('.upload-area');

                // Check if upload area exists before adding event listeners
                if (!uploadArea) {
                    console.log('Upload area not found - video upload functionality disabled');
                    return;
                }

                uploadArea.addEventListener('dragover', (e) => {
                    e.preventDefault();
                    uploadArea.classList.add('dragover');
                });

                uploadArea.addEventListener('dragleave', (e) => {
                    e.preventDefault();
                    uploadArea.classList.remove('dragover');
                });

                uploadArea.addEventListener('drop', (e) => {
                    e.preventDefault();
                    uploadArea.classList.remove('dragover');
                    const files = e.dataTransfer.files;
                    if (files.length > 0) {
                        this.handleVideoFile(files[0]);
                    }
                });
            }

            handleVideoFile(file) {
                console.log('Processing video file:', file.name);

                // Validate file type
                if (!file.type.startsWith('video/')) {
                    console.error('Invalid file type:', file.type);
                    alert('Please select a valid video file (MP4, WebM, AVI, etc.)');
                    return;
                }

                // Validate file size (100MB limit)
                const maxSize = 100 * 1024 * 1024; // 100MB in bytes
                if (file.size > maxSize) {
                    console.error('File too large:', file.size, 'bytes');
                    alert(`File size must be less than 100MB. Your file is ${(file.size / (1024 * 1024)).toFixed(2)} MB`);
                    return;
                }

                console.log('File validation passed, starting upload...');
                this.uploadVideo(file);
            }

            async uploadVideo(file) {
                const progressContainer = document.getElementById('uploadProgress');
                const progressBar = document.getElementById('progressBar');
                const progressText = document.getElementById('progressText');

                // Check if progress elements exist
                if (!progressContainer || !progressBar || !progressText) {
                    console.log('Progress elements not found - using console logging for upload progress');
                    console.log('Uploading video:', file.name);
                } else {
                    progressContainer.style.display = 'block';
                    progressText.textContent = 'Uploading video...';
                }

                try {
                    // Simulate upload progress
                    for (let i = 0; i <= 100; i += 10) {
                        if (progressBar && progressText) {
                            progressBar.style.width = i + '%';
                            progressText.textContent = `Uploading... ${i}%`;
                        } else {
                            console.log(`Upload progress: ${i}%`);
                        }
                        await new Promise(resolve => setTimeout(resolve, 200));
                    }

                    // Create video preview
                    const videoUrl = URL.createObjectURL(file);

                    // Add video to grid immediately after upload completes
                    this.addVideoToGrid({
                        title: file.name.replace(/\.[^/.]+$/, ""), // Remove extension
                        description: `Uploaded video: ${file.name} (${(file.size / (1024 * 1024)).toFixed(2)} MB)`,
                        url: videoUrl,
                        type: 'uploaded',
                        file: file
                    });

                    if (progressText) {
                        progressText.textContent = 'Upload complete! Video added to gallery.';
                    } else {
                        console.log('Upload complete! Video added to gallery.');
                    }

                    // Clear the file input so the same file can be uploaded again
                    const fileInput = document.getElementById('videoFile');
                    if (fileInput) {
                        fileInput.value = '';
                    }

                    // Hide progress after showing success message
                    setTimeout(() => {
                        progressContainer.style.display = 'none';
                        progressBar.style.width = '0%';
                    }, 3000);

                } catch (error) {
                    console.error('Error uploading video:', error);
                    progressText.textContent = 'Upload failed. Please try again.';
                    progressText.style.color = '#ea4335';

                    setTimeout(() => {
                        progressContainer.style.display = 'none';
                        progressBar.style.width = '0%';
                        progressText.style.color = '';
                    }, 3000);
                }
            }

            addVideoToGrid(videoData) {
                const videoGrid = document.getElementById('videoGrid');
                if (!videoGrid) {
                    console.error('Video grid not found');
                    return;
                }

                const videoCard = document.createElement('div');
                videoCard.className = 'video-card';
                videoCard.style.animation = 'fadeInUp 0.5s ease';

                // Escape special characters in title for onclick handlers
                const escapedTitle = videoData.title.replace(/'/g, "\\'").replace(/"/g, '\\"');
                const escapedUrl = videoData.url.replace(/'/g, "\\'").replace(/"/g, '\\"');

                videoCard.innerHTML = `
                    <div class="video-player">
                        <video controls preload="metadata" style="width: 100%; height: 100%; object-fit: cover;">
                            <source src="${videoData.url}" type="${videoData.file ? videoData.file.type : 'video/mp4'}">
                            Your browser does not support the video tag.
                        </video>
                    </div>
                    <div class="video-info">
                        <div class="video-title">${videoData.title}</div>
                        <div class="video-description">${videoData.description}</div>
                        <div class="video-controls">
                            <button class="control-button" onclick="playVideo(this)">▶️ Play</button>
                            <button class="control-button" onclick="shareVideo('${escapedTitle}')">📱 Share</button>
                            <button class="control-button" onclick="downloadVideo('${escapedUrl}', '${escapedTitle}')">💾 Download</button>
                            ${videoData.type === 'uploaded' ? '<button class="control-button" onclick="deleteVideo(this)" style="background: #ea4335;">🗑️ Delete</button>' : ''}
                        </div>
                    </div>
                `;

                // Insert the new video at the beginning of the grid (after upload section)
                const firstDemoVideo = videoGrid.querySelector('.video-card');
                if (firstDemoVideo) {
                    videoGrid.insertBefore(videoCard, firstDemoVideo);
                } else {
                    videoGrid.appendChild(videoCard);
                }

                this.uploadedVideos.push(videoData);

                // Scroll to the new video
                setTimeout(() => {
                    videoCard.scrollIntoView({ behavior: 'smooth', block: 'center' });
                }, 100);

                console.log('Video added to grid:', videoData.title);
            }
        }

        // Initialize Video Manager with error handling
        let videoManager = null;
        try {
            videoManager = new VideoManager();
            console.log('📹 Video Manager initialized successfully');
        } catch (error) {
            console.log('Video Manager initialization skipped - video elements not present');
        }

        // Video handling functions
        function handleVideoUpload(event) {
            console.log('File upload triggered');
            const file = event.target.files[0];
            if (file) {
                console.log('File selected:', file.name, 'Size:', file.size, 'Type:', file.type);
                if (videoManager) {
                    videoManager.handleVideoFile(file);
                } else {
                    console.log('Video manager not available - file upload skipped');
                }
            } else {
                console.log('No file selected');
            }
        }

        function playVideo(button) {
            const videoCard = button.closest('.video-card');
            const video = videoCard.querySelector('video');

            if (video) {
                if (video.paused) {
                    video.play();
                    button.innerHTML = '⏸️ Pause';
                } else {
                    video.pause();
                    button.innerHTML = '▶️ Play';
                }
            } else {
                // For placeholder videos, show a demo message
                const title = videoCard.querySelector('.video-title').textContent;
                alert(`🎬 Playing: ${title}\n\nThis is a demo video placeholder. Upload your own videos to see them here!`);
            }
        }

        function shareVideo(title) {
            if (navigator.share) {
                navigator.share({
                    title: `Car Voice Video: ${title}`,
                    text: `Check out this car voice system video: ${title}`,
                    url: window.location.href + '#videos'
                });
            } else {
                // Fallback for browsers that don't support Web Share API
                const shareUrl = window.location.href + '#videos';
                navigator.clipboard.writeText(shareUrl).then(() => {
                    alert('🔗 Video link copied to clipboard!');
                });
            }
        }

        function downloadVideo(url, title) {
            if (url.startsWith('blob:')) {
                // For uploaded videos
                const a = document.createElement('a');
                a.href = url;
                a.download = title + '.mp4';
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
            } else {
                // For demo videos
                alert(`📥 Download: ${title}\n\nThis is a demo video. Upload your own videos to download them!`);
            }
        }

        function deleteVideo(button) {
            if (confirm('Are you sure you want to delete this video?')) {
                const videoCard = button.closest('.video-card');
                videoCard.remove();
                alert('🗑️ Video deleted successfully!');
            }
        }

        // Connection Functions
        async function connectOBD(event) {
            event.preventDefault();
            const type = document.getElementById('obdType').value;
            const address = document.getElementById('obdAddress').value;

            if (!address) {
                alert('Please enter device address/port');
                return;
            }

            await carDataManager.connectOBD(type, address);
        }

        // Manual OBD device selection (bypasses filtering)
        async function connectOBDManual() {
            try {
                console.log('📱 Manual OBD device selection...');
                console.log('💡 This will show ALL Bluetooth devices - select your OBD adapter');

                const statusEl = document.getElementById('obdStatus');
                statusEl.textContent = 'Scanning for devices...';
                statusEl.className = 'connection-status status-connecting';

                // Try direct connection with acceptAllDevices
                if ('bluetooth' in navigator) {
                    try {
                        console.log('🔍 Requesting device selection...');
                        const device = await navigator.bluetooth.requestDevice({
                            acceptAllDevices: true,
                            optionalServices: [
                                '0000fff0-0000-1000-8000-00805f9b34fb',
                                '00001101-0000-1000-8000-00805f9b34fb',
                                '0000ffe0-0000-1000-8000-00805f9b34fb'
                            ]
                        });

                        console.log('📱 Selected device:', device.name || 'Unknown Device');

                        // Set the device address and trigger connection
                        document.getElementById('obdAddress').value = device.name || 'Manual Device';

                        // Connect using the selected device
                        const connected = await carDataManager.connectOBD('bluetooth', device.name || 'Manual Device');

                        if (connected) {
                            console.log('✅ Manual OBD connection completed successfully');
                        }

                    } catch (error) {
                        console.error('❌ Manual device selection failed:', error);
                        if (error.message.includes('cancelled')) {
                            statusEl.textContent = '⚠️ Device selection cancelled - Try again';
                            statusEl.style.background = 'rgba(255, 152, 0, 0.3)';
                            statusEl.style.color = '#ff9800';
                            console.log('💡 Tip: Make sure to select your OBD device from the list');
                        } else {
                            statusEl.textContent = 'Manual selection failed';
                            statusEl.style.background = 'rgba(244, 67, 54, 0.3)';
                            statusEl.style.color = '#f44336';
                        }
                    }
                } else {
                    alert('❌ Bluetooth not supported in this browser');
                }

            } catch (error) {
                console.error('❌ Manual OBD connection error:', error);
            }
        }

        // USB Serial OBD connection (requires direct user gesture)
        async function connectUSBSerial() {
            try {
                console.log('🔌 USB Serial OBD connection...');
                console.log('💡 This will show USB/Serial OBD adapters');

                const statusEl = document.getElementById('obdStatus');
                statusEl.textContent = 'Requesting USB Serial port...';
                statusEl.className = 'connection-status status-connecting';

                // Check if Serial API is supported
                if (!('serial' in navigator)) {
                    alert('❌ Web Serial API not supported in this browser. Try Chrome or Edge.');
                    return;
                }

                try {
                    console.log('🔍 Requesting serial port selection...');

                    // Initialize OBD reader
                    const obdReader = new OBDReader();

                    // Request serial port directly (this requires user gesture)
                    obdReader.port = await navigator.serial.requestPort();
                    await obdReader.port.open({ baudRate: 38400 });

                    console.log('✅ Serial port opened successfully');

                    // Set up the connection
                    obdReader.connected = true;
                    obdReader.realMode = true;

                    // Initialize OBD protocol
                    await obdReader.initializeOBD();

                    // Connect using the serial connection
                    carDataManager.obdReader = obdReader;
                    carDataManager.connections.obd.connected = true;
                    carDataManager.connections.obd.device = 'USB Serial OBD';

                    statusEl.textContent = '🟢 REAL OBD DATA - USB SERIAL Connected';
                    statusEl.style.background = 'rgba(52, 168, 83, 0.3)';
                    statusEl.style.color = '#34a853';
                    statusEl.style.fontWeight = 'bold';
                    statusEl.className = 'connection-status status-connected';

                    console.log('✅ USB Serial OBD connection successful');

                    // Start reading real OBD data
                    carDataManager.startRealOBDDataReading();

                } catch (error) {
                    console.error('❌ USB Serial connection failed:', error);
                    if (error.message.includes('No port selected')) {
                        statusEl.textContent = '⚠️ No USB port selected - Try again';
                        statusEl.style.background = 'rgba(255, 152, 0, 0.3)';
                        statusEl.style.color = '#ff9800';
                        console.log('💡 Tip: Make sure to select your USB OBD adapter from the list');
                    } else {
                        statusEl.textContent = 'USB Serial connection failed';
                        statusEl.style.background = 'rgba(244, 67, 54, 0.3)';
                        statusEl.style.color = '#f44336';
                    }
                }

            } catch (error) {
                console.error('❌ USB Serial OBD connection error:', error);
            }
        }

        async function connectManufacturer(event) {
            event.preventDefault();
            const brand = document.getElementById('carBrand').value;
            const email = document.getElementById('manufacturerEmail').value;
            const password = document.getElementById('manufacturerPassword').value;

            if (!brand || !email || !password) {
                alert('Please fill in all fields');
                return;
            }

            await carDataManager.connectManufacturerAPI(brand, email, password);
        }

        async function connectSmartcar(event) {
            event.preventDefault();
            const apiKey = document.getElementById('smartcarKey').value;
            const vehicleId = document.getElementById('smartcarVehicleId').value;

            if (!apiKey || !vehicleId) {
                alert('Please fill in all fields');
                return;
            }

            await carDataManager.connectSmartcarAPI(apiKey, vehicleId);
        }

        // Bluetooth Device Scanning Function (All Devices)
        async function scanBluetoothDevices() {
            const devicesListEl = document.getElementById('bluetoothDevicesList');
            const statusEl = document.getElementById('bluetoothStatus');

            try {
                // Update status
                statusEl.innerHTML = '🔄 Scanning for devices...';
                statusEl.style.background = 'rgba(255, 152, 0, 0.1)';
                statusEl.style.borderColor = '#ff9800';
                statusEl.style.color = '#ff9800';

                // Show scanning message
                devicesListEl.innerHTML = `
                    <div style="text-align: center; padding: 20px; color: rgba(255,255,255,0.7);">
                        <div style="margin-bottom: 10px;">🔄 Scanning for Bluetooth devices...</div>
                        <div style="font-size: 0.8rem;">Please make sure your OBD device is in pairing mode</div>
                    </div>
                `;

                // Check if Web Bluetooth is supported
                if (!('bluetooth' in navigator)) {
                    throw new Error('Bluetooth not supported in this browser. Please use Chrome or Edge.');
                }

                // Request Bluetooth device with more flexible filters
                const device = await navigator.bluetooth.requestDevice({
                    acceptAllDevices: true,
                    optionalServices: [
                        '0000fff0-0000-1000-8000-00805f9b34fb', // Common OBD service
                        '00001101-0000-1000-8000-00805f9b34fb', // Serial Port Profile
                        '0000110a-0000-1000-8000-00805f9b34fb', // Audio Source
                        '0000110b-0000-1000-8000-00805f9b34fb'  // Audio Sink
                    ]
                });

                // Display found device with better identification
                displayBluetoothDevice(device);

                // Update status
                statusEl.innerHTML = '✅ Device Found';
                statusEl.style.background = 'rgba(52, 168, 83, 0.1)';
                statusEl.style.borderColor = '#34a853';
                statusEl.style.color = '#34a853';

                console.log('Bluetooth device found:', device.name);

            } catch (error) {
                console.error('Bluetooth scan failed:', error);

                statusEl.innerHTML = '❌ Scan Failed';
                statusEl.style.background = 'rgba(244, 67, 54, 0.1)';
                statusEl.style.borderColor = '#f44336';
                statusEl.style.color = '#f44336';

                // Show error message in devices list
                let errorMessage = 'Scan failed. ';
                if (error.message.includes('not supported')) {
                    errorMessage += 'Please use Chrome or Edge browser.';
                } else if (error.message.includes('User cancelled')) {
                    errorMessage += 'Device selection was cancelled.';
                } else {
                    errorMessage += 'Please ensure your OBD device is in pairing mode and try again.';
                }

                devicesListEl.innerHTML = `
                    <div style="text-align: center; padding: 20px; color: #f44336;">
                        <div style="margin-bottom: 10px;">❌ ${errorMessage}</div>
                        <button type="button" onclick="scanBluetoothDevices()" class="connect-button" style="background: linear-gradient(45deg, #4285f4, #34a853); padding: 8px 16px; font-size: 0.9rem;">
                            🔍 Try Again
                        </button>
                    </div>
                `;

                // Reset status after 3 seconds
                setTimeout(() => {
                    statusEl.innerHTML = '🔵 Bluetooth Active';
                    statusEl.style.background = 'rgba(52, 168, 83, 0.1)';
                    statusEl.style.borderColor = '#34a853';
                    statusEl.style.color = '#34a853';
                }, 3000);
            }
        }

        // OBD-Specific Device Scanning Function
        async function scanOBDDevices() {
            const devicesListEl = document.getElementById('bluetoothDevicesList');
            const statusEl = document.getElementById('bluetoothStatus');

            try {
                // Update status
                statusEl.innerHTML = '🔄 Scanning for OBD devices...';
                statusEl.style.background = 'rgba(255, 152, 0, 0.1)';
                statusEl.style.borderColor = '#ff9800';
                statusEl.style.color = '#ff9800';

                // Show scanning message
                devicesListEl.innerHTML = `
                    <div style="text-align: center; padding: 20px; color: rgba(255,255,255,0.7);">
                        <div style="margin-bottom: 10px;">🔄 Scanning for OBD devices...</div>
                        <div style="font-size: 0.8rem;">Looking for ELM327, OBDII, and OBD devices</div>
                    </div>
                `;

                // Check if Web Bluetooth is supported
                if (!('bluetooth' in navigator)) {
                    throw new Error('Bluetooth not supported in this browser. Please use Chrome or Edge.');
                }

                // Request Bluetooth device with OBD-specific filters
                const device = await navigator.bluetooth.requestDevice({
                    filters: [
                        { namePrefix: 'OBDII' },
                        { namePrefix: 'ELM327' },
                        { namePrefix: 'OBD' },
                        { namePrefix: 'obd' },
                        { namePrefix: 'elm' },
                        { namePrefix: 'Elm' },
                        { namePrefix: 'ELM' },
                        { namePrefix: 'HC-05' },
                        { namePrefix: 'HC-06' },
                        { namePrefix: 'ESP32' }
                    ],
                    optionalServices: [
                        '0000fff0-0000-1000-8000-00805f9b34fb', // Common OBD service
                        '00001101-0000-1000-8000-00805f9b34fb'  // Serial Port Profile
                    ]
                });

                // Display found device
                displayBluetoothDevice(device);

                // Update status
                statusEl.innerHTML = '✅ OBD Device Found';
                statusEl.style.background = 'rgba(52, 168, 83, 0.1)';
                statusEl.style.borderColor = '#34a853';
                statusEl.style.color = '#34a853';

                console.log('OBD Bluetooth device found:', device.name);

            } catch (error) {
                console.error('OBD Bluetooth scan failed:', error);

                statusEl.innerHTML = '❌ OBD Scan Failed';
                statusEl.style.background = 'rgba(244, 67, 54, 0.1)';
                statusEl.style.borderColor = '#f44336';
                statusEl.style.color = '#f44336';

                // Show error message with fallback option
                let errorMessage = 'OBD scan failed. ';
                if (error.message.includes('not supported')) {
                    errorMessage += 'Please use Chrome or Edge browser.';
                } else if (error.message.includes('User cancelled')) {
                    errorMessage += 'Device selection was cancelled.';
                } else {
                    errorMessage += 'No OBD devices found.';
                }

                devicesListEl.innerHTML = `
                    <div style="text-align: center; padding: 20px; color: #f44336;">
                        <div style="margin-bottom: 15px;">❌ ${errorMessage}</div>
                        <div style="display: flex; gap: 10px; justify-content: center; flex-wrap: wrap;">
                            <button type="button" onclick="scanOBDDevices()" class="connect-button" style="background: linear-gradient(45deg, #ff9800, #f44336); padding: 8px 16px; font-size: 0.9rem;">
                                🚗 Try OBD Again
                            </button>
                            <button type="button" onclick="scanBluetoothDevices()" class="connect-button" style="background: linear-gradient(45deg, #4285f4, #34a853); padding: 8px 16px; font-size: 0.9rem;">
                                🔍 Scan All Devices
                            </button>
                        </div>
                        <div style="font-size: 0.8rem; margin-top: 10px; opacity: 0.8;">
                            💡 Try "Scan All Devices" to see all available Bluetooth devices
                        </div>
                    </div>
                `;

                // Reset status after 3 seconds
                setTimeout(() => {
                    statusEl.innerHTML = '🔵 Bluetooth Active';
                    statusEl.style.background = 'rgba(52, 168, 83, 0.1)';
                    statusEl.style.borderColor = '#34a853';
                    statusEl.style.color = '#34a853';
                }, 3000);
            }
        }

        // Display Bluetooth Device in List
        function displayBluetoothDevice(device) {
            const devicesListEl = document.getElementById('bluetoothDevicesList');
            let deviceName = device.name || 'Unknown Device';
            const deviceId = device.id || 'Unknown ID';

            // Try to identify device type from MAC address or ID patterns
            let deviceType = '📱';
            let suggestedName = deviceName;

            if (deviceName === 'Unknown Device' || deviceName.includes('Unknown')) {
                // Try to guess device type from MAC address patterns
                const macAddress = deviceId.replace(/[()]/g, '');

                // Common OBD device MAC patterns
                if (macAddress.includes('00:1D:A5') || macAddress.includes('00:04:3E') ||
                    macAddress.includes('20:15:03') || macAddress.includes('00:0D:18')) {
                    deviceType = '🚗';
                    suggestedName = 'OBD-II Device';
                } else if (macAddress.includes('98:D3:') || macAddress.includes('30:14:') ||
                          macAddress.includes('24:0A:') || macAddress.includes('A4:C1:')) {
                    deviceType = '🚗';
                    suggestedName = 'ELM327 OBD';
                } else if (macAddress.includes('HC-') || deviceId.includes('HC')) {
                    deviceType = '🔗';
                    suggestedName = 'HC Bluetooth Module';
                } else if (macAddress.includes('ESP32') || deviceId.includes('ESP')) {
                    deviceType = '⚡';
                    suggestedName = 'ESP32 Device';
                } else {
                    deviceType = '📡';
                    suggestedName = 'Bluetooth Device';
                }
            } else if (deviceName.toLowerCase().includes('obd') ||
                      deviceName.toLowerCase().includes('elm') ||
                      deviceName.toLowerCase().includes('car')) {
                deviceType = '🚗';
            }

            devicesListEl.innerHTML = `
                <div style="background: rgba(255,255,255,0.1); border-radius: 8px; padding: 15px; margin: 10px 0; border: 1px solid rgba(255,255,255,0.2);">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <div style="font-weight: bold; color: #4285f4; margin-bottom: 5px;">
                                ${deviceType} ${suggestedName}
                            </div>
                            ${deviceName !== suggestedName ? `
                                <div style="font-size: 0.75rem; color: rgba(255,255,255,0.5); margin-bottom: 3px;">
                                    Original: ${deviceName}
                                </div>
                            ` : ''}
                            <div style="font-size: 0.8rem; color: rgba(255,255,255,0.7);">
                                MAC: ${deviceId.replace(/[()]/g, '')}
                            </div>
                            <div style="font-size: 0.8rem; color: #34a853; margin-top: 5px;">
                                ✅ Available for pairing
                            </div>
                        </div>
                        <div style="display: flex; flex-direction: column; gap: 5px;">
                            <button type="button" onclick="pairBluetoothDevice('${suggestedName}', '${deviceId}')" class="connect-button" style="background: linear-gradient(45deg, #4285f4, #34a853); padding: 8px 16px; font-size: 0.8rem;">
                                📱 Pair
                            </button>
                            <button type="button" onclick="connectToBluetoothDevice('${suggestedName}', '${deviceId}')" class="connect-button" style="background: linear-gradient(45deg, #ff9800, #f44336); padding: 8px 16px; font-size: 0.8rem;">
                                🔗 Connect
                            </button>
                        </div>
                    </div>
                </div>
                <div style="text-align: center; margin-top: 10px;">
                    <button type="button" onclick="scanBluetoothDevices()" class="connect-button" style="background: linear-gradient(45deg, #9c27b0, #e91e63); padding: 8px 16px; font-size: 0.8rem;">
                        🔍 Scan Again
                    </button>
                </div>
            `;
        }

        // Pair Bluetooth Device
        async function pairBluetoothDevice(deviceName, deviceId) {
            const statusEl = document.getElementById('bluetoothStatus');
            const obdStatusEl = document.getElementById('obdStatus');

            try {
                statusEl.innerHTML = `🔄 Pairing with ${deviceName}...`;
                statusEl.style.background = 'rgba(255, 152, 0, 0.1)';
                statusEl.style.borderColor = '#ff9800';
                statusEl.style.color = '#ff9800';

                // Simulate pairing process
                await new Promise(resolve => setTimeout(resolve, 2000));

                // Update status to show paired device
                statusEl.innerHTML = `✅ Paired: ${deviceName}`;
                statusEl.style.background = 'rgba(52, 168, 83, 0.1)';
                statusEl.style.borderColor = '#34a853';
                statusEl.style.color = '#34a853';

                // Update the hidden input field with device info
                document.getElementById('obdAddress').value = deviceName;

                // Update OBD status
                obdStatusEl.textContent = 'Device Paired - Ready to Connect';
                obdStatusEl.className = 'connection-status status-connecting';

                // Enable connect button
                document.getElementById('connectOBDBtn').disabled = false;

                console.log('Bluetooth device paired:', deviceName);

                // Voice confirmation
                if (typeof speak === 'function') {
                    speak(`Bluetooth device ${deviceName} paired successfully. You can now connect.`);
                }

            } catch (error) {
                console.error('Bluetooth pairing failed:', error);
                alert('Pairing failed. Please try again.');
            }
        }

        // Connect to Bluetooth Device
        async function connectToBluetoothDevice(deviceName, deviceId) {
            // First pair, then connect
            await pairBluetoothDevice(deviceName, deviceId);

            // Trigger OBD connection
            setTimeout(() => {
                const form = document.querySelector('form[onsubmit*="connectOBD"]');
                if (form) {
                    const event = new Event('submit');
                    form.dispatchEvent(event);
                }
            }, 1000);
        }

        // Auto-scan on page load
        document.addEventListener('DOMContentLoaded', function() {
            // Auto-scan after a short delay
            setTimeout(() => {
                console.log('🔍 Auto-scanning for Bluetooth devices...');
                // Don't auto-scan immediately to avoid permission prompts
                // User needs to click scan button first
            }, 2000);
        });

        // Simple Car Control Functions - NOW WITH VOICE
        function startEngine() {
            const statusEl = document.getElementById('demoStatus');
            statusEl.textContent = 'Starting engine...';
            statusEl.style.color = '#34a853';

            // Check if aiVoice is initialized
            if (typeof aiVoice !== 'undefined' && aiVoice) {
                // Speak the action
                aiVoice.speakRobotic("COMMAND RECEIVED. INITIATING ENGINE START SEQUENCE.");
            }

            setTimeout(() => {
                const response = carDataManager.startEngine();
                statusEl.textContent = response;
                statusEl.style.color = '#4285f4';

                // Speak the result if voice is available
                if (typeof aiVoice !== 'undefined' && aiVoice) {
                    aiVoice.speakRobotic("ENGINE ACTIVATION COMPLETE. VEHICLE SYSTEMS OPERATIONAL.");
                }
            }, 1000);
        }

        function stopEngine() {
            const statusEl = document.getElementById('demoStatus');
            statusEl.textContent = 'Stopping engine...';
            statusEl.style.color = '#ea4335';

            // Check if aiVoice is initialized
            if (typeof aiVoice !== 'undefined' && aiVoice) {
                // Speak the action
                aiVoice.speakRobotic("COMMAND RECEIVED. INITIATING ENGINE SHUTDOWN SEQUENCE.");
            }

            setTimeout(() => {
                const response = carDataManager.stopEngine();
                statusEl.textContent = response;
                statusEl.style.color = '#4285f4';

                // Speak the result if voice is available
                if (typeof aiVoice !== 'undefined' && aiVoice) {
                    aiVoice.speakRobotic("ENGINE DEACTIVATION COMPLETE. VEHICLE SECURED.");
                }
            }, 1000);
        }

        function checkStatus() {
            const statusEl = document.getElementById('demoStatus');
            statusEl.textContent = 'Checking car status...';
            statusEl.style.color = '#fbbc05';

            // Check if aiVoice is initialized
            if (typeof aiVoice !== 'undefined' && aiVoice) {
                // Speak the action
                aiVoice.speakRobotic("INITIATING VEHICLE STATUS SCAN.");
            }

            setTimeout(async () => {
                const response = carDataManager.getCarStatus();
                statusEl.textContent = response;
                statusEl.style.color = '#4285f4';

                // Speak detailed status if voice is available
                if (typeof aiVoice !== 'undefined' && aiVoice) {
                    const detailedStatus = await aiVoice.getCarStatusSpeech();
                    aiVoice.speakRobotic(detailedStatus);
                }
            }, 1000);
        }

        // ========================================
        // SIMPLE VOICE SYSTEM
        // ========================================
        // Simple and clean voice functionality

        // Simple Voice Functions
        function sayHello() {
            const statusEl = document.getElementById('voiceStatus');
            statusEl.textContent = '🎤 AI speaking...';
            statusEl.style.color = '#4285f4';

            // Male robot voice
            speak("Hello! I am Car Voice. Can I help you?", function() {
                statusEl.textContent = '✅ Ready for voice commands!';
                statusEl.style.color = '#34a853';
            });
        }

        function getCarStatus() {
            const statusEl = document.getElementById('voiceStatus');
            statusEl.textContent = '📊 Getting car status...';
            statusEl.style.color = '#ff9800';

            // Get car data
            const data = carDataManager.realTimeData;
            const engineStatus = data.engineRunning ? 'running' : 'stopped';
            const battery = Math.round(data.batteryLevel);
            const fuel = Math.round(data.fuelLevel);

            const message = `Engine is ${engineStatus}. Battery ${battery} percent. Fuel ${fuel} percent.`;

            // Male robot voice
            speak(message, function() {
                statusEl.textContent = '✅ Car status complete!';
                statusEl.style.color = '#34a853';
            });
        }

        // Voice Commands Functionality
        let recognition = null;
        let isListening = false;

        function startVoiceCommands() {
            const statusEl = document.getElementById('voiceStatus');

            // Check if speech recognition is supported
            if (!('webkitSpeechRecognition' in window) && !('SpeechRecognition' in window)) {
                statusEl.textContent = '❌ Voice recognition not supported in this browser';
                statusEl.style.color = '#ea4335';
                speak('Voice recognition is not supported in this browser. Please try Chrome or Edge.');
                return;
            }

            // First, AI greets the user
            statusEl.textContent = '🎤 AI speaking...';
            statusEl.style.color = '#4285f4';

            speak('Hello I\'m Car Voice, need to help?', function() {
                // After greeting, start listening for commands
                startListening();
            });
        }

        function startListening() {
            const statusEl = document.getElementById('voiceStatus');

            // Initialize speech recognition
            const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
            recognition = new SpeechRecognition();
            recognition.continuous = false;
            recognition.interimResults = false;
            recognition.lang = 'en-US';

            statusEl.textContent = '🎙️ Listening for voice commands...';
            statusEl.style.color = '#9c27b0';

            // Start listening
            recognition.onstart = function() {
                isListening = true;
                console.log('Voice recognition started');
            };

            recognition.onresult = function(event) {
                const command = event.results[0][0].transcript.toLowerCase();
                console.log('Voice command received:', command);

                statusEl.textContent = `🎤 Heard: "${command}"`;
                statusEl.style.color = '#e91e63';

                // Process the voice command
                processVoiceCommand(command);
            };

            recognition.onerror = function(event) {
                console.error('Speech recognition error:', event.error);
                isListening = false;

                statusEl.textContent = '❌ Voice recognition failed. Please try again.';
                statusEl.style.color = '#ea4335';

                speak('Sorry, I could not understand your command. Please try again.');
            };

            recognition.onend = function() {
                isListening = false;
                console.log('Voice recognition ended');
            };

            // Start recognition
            try {
                recognition.start();
            } catch (error) {
                console.error('Failed to start voice recognition:', error);
                statusEl.textContent = '❌ Failed to start voice recognition';
                statusEl.style.color = '#ea4335';
            }
        }

        function processVoiceCommand(command) {
            const statusEl = document.getElementById('voiceStatus');

            // Engine start commands
            if (command.includes('start engine') || command.includes('turn on engine') || command.includes('start car')) {
                statusEl.textContent = '🚗 Starting engine...';
                statusEl.style.color = '#34a853';

                carDataManager.startEngine();
                speak('Engine started successfully. Your car is now running.');

                setTimeout(() => {
                    statusEl.textContent = '✅ Engine started!';
                    statusEl.style.color = '#34a853';
                }, 2000);
                return;
            }

            // Engine stop commands
            if (command.includes('stop engine') || command.includes('turn off engine') ||
                command.includes('shut down engine') || command.includes('stop car')) {
                statusEl.textContent = '🛑 Stopping engine...';
                statusEl.style.color = '#f44336';

                carDataManager.stopEngine();
                speak('Engine stopped successfully. Your car is now turned off.');

                setTimeout(() => {
                    statusEl.textContent = '✅ Engine stopped!';
                    statusEl.style.color = '#f44336';
                }, 2000);
                return;
            }

            // Status check commands
            if (command.includes('check car status') || command.includes('car status') ||
                command.includes('status report') || command.includes('check status')) {
                statusEl.textContent = '📊 Checking car status...';
                statusEl.style.color = '#ff9800';

                // Get car data and determine if connected to real car
                const data = carDataManager.realTimeData;
                const isConnected = carDataManager.isConnected();
                const engineStatus = data.engineRunning ? 'running' : 'stopped';
                const battery = Math.round(data.batteryLevel);
                const fuel = Math.round(data.fuelLevel);
                const temp = Math.round(data.engineTemp);

                let statusMessage;
                if (isConnected) {
                    // Real data from connected car
                    statusMessage = `OK your car status is based on real data. Engine is ${engineStatus}. Battery level is ${battery} percent. Fuel level is ${fuel} percent. Engine temperature is ${temp} degrees Fahrenheit.`;
                } else {
                    // Sample data when not connected
                    statusMessage = `OK your car status is based on sample data since your car is not connected. Engine is ${engineStatus}. Battery level is ${battery} percent. Fuel level is ${fuel} percent. Engine temperature is ${temp} degrees Fahrenheit.`;
                }

                speak(statusMessage);

                setTimeout(() => {
                    statusEl.textContent = '✅ Status report complete!';
                    statusEl.style.color = '#34a853';
                }, 4000);
                return;
            }

            // Unknown command
            statusEl.textContent = '❓ Command not recognized';
            statusEl.style.color = '#fbbc05';
            speak('Sorry, I did not understand that command. You can say start engine, stop engine, or check car status.');

            setTimeout(() => {
                statusEl.textContent = '✅ Ready for voice commands!';
                statusEl.style.color = '#34a853';
            }, 3000);
        }

        // Male robot voice text-to-speech helper function
        function speak(text, callback) {
            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(text);

                // Robot voice settings - male and robotic
                utterance.rate = 0.6;    // Slower for robotic effect
                utterance.pitch = 0.4;   // Lower pitch for male robot voice
                utterance.volume = 1.0;  // Full volume

                // Try to select a male voice
                const voices = speechSynthesis.getVoices();
                const maleVoice = voices.find(voice =>
                    voice.name.toLowerCase().includes('male') ||
                    voice.name.toLowerCase().includes('david') ||
                    voice.name.toLowerCase().includes('mark') ||
                    voice.name.toLowerCase().includes('alex') ||
                    voice.name.toLowerCase().includes('daniel')
                ) || voices.find(voice =>
                    voice.lang.startsWith('en') &&
                    !voice.name.toLowerCase().includes('female') &&
                    !voice.name.toLowerCase().includes('zira') &&
                    !voice.name.toLowerCase().includes('cortana')
                );

                if (maleVoice) {
                    utterance.voice = maleVoice;
                    console.log('Using male robot voice:', maleVoice.name);
                }

                // Add callback support
                if (callback && typeof callback === 'function') {
                    utterance.onend = callback;
                }

                speechSynthesis.speak(utterance);
            } else if (callback && typeof callback === 'function') {
                // If speech synthesis is not supported, still call the callback
                callback();
            }
        }


        // End of simple voice system

        // Simple voice system initialization
        document.addEventListener('DOMContentLoaded', function() {
            console.log('🎤 Simple Voice System Ready');
        });






        // Simple Voice Functions (replacing complex AI voice system)



        // End of simple voice system
















        // Smooth scrolling for navigation links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                document.querySelector(this.getAttribute('href')).scrollIntoView({
                    behavior: 'smooth'
                });
            });
        });

        // Header scroll effect
        window.addEventListener('scroll', () => {
            const header = document.querySelector('header');
            if (window.scrollY > 100) {
                header.style.background = 'rgba(0, 0, 0, 0.95)';
            } else {
                header.style.background = 'rgba(0, 0, 0, 0.9)';
            }
        });

        // Animate elements on scroll
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.animation = 'fadeInUp 1s ease forwards';
                }
            });
        }, observerOptions);

        document.querySelectorAll('.feature-card, .step, .setup-card, .metric-card').forEach(el => {
            observer.observe(el);
        });

        // Mobile Menu Functions
        function toggleMobileMenu() {
            const navLinks = document.getElementById('navLinks');
            const menuToggle = document.querySelector('.mobile-menu-toggle');
            const overlay = document.getElementById('mobileOverlay');

            navLinks.classList.toggle('mobile-open');
            overlay.classList.toggle('active');

            // Change hamburger icon to X when open
            if (navLinks.classList.contains('mobile-open')) {
                menuToggle.innerHTML = '✕';
                menuToggle.setAttribute('aria-label', 'Close menu');
                menuToggle.style.fontSize = '1.5rem';
                document.body.style.overflow = 'hidden'; // Prevent background scroll
            } else {
                menuToggle.innerHTML = '☰';
                menuToggle.setAttribute('aria-label', 'Open menu');
                menuToggle.style.fontSize = '1.8rem';
                document.body.style.overflow = ''; // Restore scroll
            }
        }

        function closeMobileMenu() {
            const navLinks = document.getElementById('navLinks');
            const menuToggle = document.querySelector('.mobile-menu-toggle');
            const overlay = document.getElementById('mobileOverlay');

            navLinks.classList.remove('mobile-open');
            overlay.classList.remove('active');
            menuToggle.innerHTML = '☰';
            menuToggle.setAttribute('aria-label', 'Open menu');
            menuToggle.style.fontSize = '1.8rem';
            document.body.style.overflow = ''; // Restore scroll
        }

        // Close mobile menu when clicking outside
        document.addEventListener('click', function(event) {
            const nav = document.querySelector('nav');
            const navLinks = document.getElementById('navLinks');

            if (!nav.contains(event.target) && navLinks.classList.contains('mobile-open')) {
                closeMobileMenu();
            }
        });

        // Close mobile menu on window resize
        window.addEventListener('resize', function() {
            if (window.innerWidth > 768) {
                closeMobileMenu();
            }
        });

        // Prevent scroll when mobile menu is open
        function preventScroll(e) {
            e.preventDefault();
        }

        // Add scroll prevention when menu opens
        const navLinks = document.getElementById('navLinks');
        const observer2 = new MutationObserver(function(mutations) {
            mutations.forEach(function(mutation) {
                if (mutation.type === 'attributes' && mutation.attributeName === 'class') {
                    if (navLinks.classList.contains('mobile-open')) {
                        document.body.style.overflow = 'hidden';
                    } else {
                        document.body.style.overflow = '';
                    }
                }
            });
        });

        observer2.observe(navLinks, {
            attributes: true,
            attributeFilter: ['class']
        });
    </script>


</body>
</html>